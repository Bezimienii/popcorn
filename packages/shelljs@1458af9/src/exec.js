function execSync(e,n){function c(){if(!a.silent&&fs.existsSync(t)){var e=fs.readFileSync(t,"utf8");e.length<=f.length||(process.stdout.write(e.substr(f.length)),f=e)}}function o(e){return(e+"").replace(/([\\"'])/g,"\\$1").replace(/\0/g,"\\0")}var r=_tempDir(),t=path.resolve(r+"/"+common.randomFileName()),s=path.resolve(r+"/"+common.randomFileName()),i=path.resolve(r+"/"+common.randomFileName()),m=path.resolve(r+"/"+common.randomFileName()),a=common.extend({silent:common.config.silent},n),f="";e+=" > "+t+" 2>&1";var u="var child = require('child_process'),     fs = require('fs');child.exec('"+o(e)+"', {env: process.env, maxBuffer: 20*1024*1024}, function(err) {  fs.writeFileSync('"+o(s)+"', err ? err.code.toString() : '0');});";for(fs.existsSync(i)&&common.unlinkSync(i),fs.existsSync(t)&&common.unlinkSync(t),fs.existsSync(s)&&common.unlinkSync(s),fs.writeFileSync(i,u),child.exec('"'+process.execPath+'" '+i,{env:process.env,cwd:_pwd(),maxBuffer:20971520});!fs.existsSync(s);)c(),fs.writeFileSync(m,"a");for(;!fs.existsSync(t);)c(),fs.writeFileSync(m,"a");for(var l=parseInt("",10);isNaN(l);)l=parseInt(fs.readFileSync(s,"utf8"),10);var y=fs.readFileSync(t,"utf8");try{common.unlinkSync(i)}catch(d){}try{common.unlinkSync(t)}catch(d){}try{common.unlinkSync(s)}catch(d){}try{common.unlinkSync(m)}catch(d){}(1===l||2===l||l>=126)&&common.error("",!0);var p={code:l,output:y};return p}function execAsync(e,n,c){var o="",r=common.extend({silent:common.config.silent},n),t=child.exec(e,{env:process.env,maxBuffer:20971520},function(e){c&&c(e?e.code:0,o)});return t.stdout.on("data",function(e){o+=e,r.silent||process.stdout.write(e)}),t.stderr.on("data",function(e){o+=e,r.silent||process.stdout.write(e)}),t}function _exec(e,n,c){return e||common.error("must specify command"),"function"==typeof n&&(c=n,n={async:!0}),"object"==typeof n&&"function"==typeof c&&(n.async=!0),n=common.extend({silent:common.config.silent,async:!1},n),n.async?execAsync(e,n,c):execSync(e,n)}var common=require("./common"),_tempDir=require("./tempdir"),_pwd=require("./pwd"),path=require("path"),fs=require("fs"),child=require("child_process");module.exports=_exec;