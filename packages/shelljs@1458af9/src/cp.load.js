montageDefine("1458af9","src/cp",{dependencies:["fs","path","./common","os"],factory:function(e,r,c){function n(e,r){t.existsSync(e)||a.error("copyFileSync: no such file or directory: "+e);var c=65536,n=new Buffer(c),o=c,i=0,s=null,y=null;try{s=t.openSync(e,"r")}catch(l){a.error("copyFileSync: could not read src file ("+e+")")}try{y=t.openSync(r,"w")}catch(l){a.error("copyFileSync: could not write to dest file (code="+l.code+"):"+r)}for(;o===c;)o=t.readSync(s,n,0,c,i),t.writeSync(y,n,0,o),i+=o;t.closeSync(s),t.closeSync(y),t.chmodSync(r,t.statSync(e).mode)}function o(e,r,c){c||(c={});var i=t.statSync(e);try{t.mkdirSync(r,i.mode)}catch(s){if("EEXIST"!==s.code)throw s}for(var l=t.readdirSync(e),f=0;f<l.length;f++){var d=e+"/"+l[f],S=r+"/"+l[f],u=t.lstatSync(d);if(u.isDirectory())o(d,S,c);else if(u.isSymbolicLink()){var h=t.readlinkSync(d);t.symlinkSync(h,S,"win32"===y.platform()?"junction":null)}else t.existsSync(S)&&!c.force?a.log("skipping existing file: "+l[f]):n(d,S)}}function i(e,r,c){e=a.parseOptions(e,{f:"force",R:"recursive",r:"recursive"}),arguments.length<3?a.error("missing <source> and/or <dest>"):arguments.length>3?(r=[].slice.call(arguments,1,arguments.length-1),c=arguments[arguments.length-1]):"string"==typeof r?r=[r]:"length"in r?r=r:a.error("invalid arguments");var i=t.existsSync(c),y=i&&t.statSync(c);if(i&&y.isDirectory()||!(r.length>1)||a.error("dest is not a directory (too many sources)"),i&&y.isFile()&&!e.force&&a.error("dest file already exists: "+c),e.recursive){r.forEach(function(e,c){"/"===e[e.length-1]&&(r[c]+="*")});try{t.mkdirSync(c,parseInt("0777",8))}catch(l){}}r=a.expand(r),r.forEach(function(r){if(!t.existsSync(r))return void a.error("no such file or directory: "+r,!0);{if(!t.statSync(r).isDirectory()){var i=c;return t.existsSync(c)&&t.statSync(c).isDirectory()&&(i=s.normalize(c+"/"+s.basename(r))),t.existsSync(i)&&!e.force?void a.error("dest file already exists: "+i,!0):void n(r,i)}if(e.recursive){var y=s.join(c,s.basename(r)),l=t.statSync(r);try{t.mkdirSync(y,l.mode)}catch(f){if("EEXIST"!==f.code)throw f}o(r,y,{force:e.force})}else a.log(r+" is a directory (not copied)")}})}var t=e("fs"),s=e("path"),a=e("./common"),y=e("os");c.exports=i}});