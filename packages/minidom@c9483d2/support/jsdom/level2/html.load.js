montageDefine("c9483d2","support/jsdom/level2/html",{dependencies:["./core","./core","../browser/documentfeatures","url","path","fs","http","https","./languages/javascript","canvas"],factory:function(t,e,n){function o(t,e){var n=p.resolve(t,e),o=p.resolve(n,"#"),r=p.parse(n),i=o.slice(0,-1)+(r.hash||"");return/^file\:\/\/\/[a-z]\:\//i.test(t)&&/^file\:\/\/\//.test(i)&&!/^file\:\/\/\/[a-z]\:\//i.test(i)&&(i=i.replace(/^file\:\/\/\//,t.substring(0,11))),i}function r(t,e){var n=e.tagName,o=e.tagNames||(n?[n]:[]),r=e.parentClass||l.HTMLElement,i=e.attributes||[],a=e.proto||{},s=l[t]=function(t,e){r.call(this,t,e||n.toUpperCase()),s._init&&s._init.call(this)};s._init=e.init,s.prototype=a,s.prototype.__proto__=r.prototype,i.forEach(function(t){var e=t.prop||t,n=t.attr||e.toLowerCase();t.prop&&t.read===!1||s.prototype.__defineGetter__(e,function(){var e=this.getAttribute(n);return t.type&&"boolean"===t.type?null!==e:t.type&&"long"===t.type?+e:"object"==typeof t&&t.normalize?t.normalize(e):e}),t.prop&&t.write===!1||s.prototype.__defineSetter__(e,function(e){if(e){var o=e.toString();t.normalize&&(o=t.normalize(o)),this.setAttribute(n,o)}else this.removeAttribute(n)})}),o.forEach(function(t){l.Document.prototype._elementBuilders[t.toLowerCase()]=function(t,n){var o=new s(t,n);return e.elementBuilder?e.elementBuilder(o,t,n):o}})}function i(t,e){for(e=e.toUpperCase();t;){if(t.nodeName.toUpperCase()===e||t.tagName&&t.tagName.toUpperCase()===e)return t;t=t._parentNode}return null}function a(t,e,n){var o=n?t._ownerDocument||t:t;return new l.HTMLCollection(o,l.mapper(t,function(t){return t.nodeName===e&&"undefined"==typeof t._publicId},n))}function s(t,e){if(!t)return null;var n=a(t,e,!1);return n.length>0?n[0]:null}function c(t){this.paused=!!t}function u(t){t._contentDocument&&(t._contentDocument._parentWindow?t._contentDocument.parentWindow.close():delete t._contentDocument);var e=t.src,n=t._ownerDocument,o=l.resourceLoader.resolve(n,e),r=t._contentDocument=new l.HTMLDocument({url:o,documentRoot:m.dirname(o)});h(r,n.implementation._features);var i=n.parentWindow,a=r.parentWindow;a.parent=i,a.top=i.top,l.resourceLoader.load(t,o,function(t,e){r.write(t),r.close()})}var l=t("./core").dom.level2.core,h=(t("./core").dom.level2.events,t("../browser/documentfeatures").applyDocumentFeatures),p=t("url"),m=t("path"),d=t("fs"),f=t("http"),b=t("https");l=Object.create(l),l.languageProcessors={javascript:t("./languages/javascript").javascript},l.resourceLoader={load:function(t,e,n){var o=t._ownerDocument.implementation;if(o.hasFeature("FetchExternalResources",t.tagName.toLowerCase())){var r=this.resolve(t._ownerDocument,e),i=p.parse(r);if(o.hasFeature("SkipExternalResources",r))return!1;i.hostname?this.download(i,t._ownerDocument._cookie,t._ownerDocument._cookieDomain,this.baseUrl(t._ownerDocument),this.enqueue(t,n,r)):this.readFile(i.pathname,this.enqueue(t,n,r))}},enqueue:function(t,e,n){var o=t.nodeType===l.Node.DOCUMENT_NODE?t:t._ownerDocument;return o._queue?o._queue.push(function(r,i){var a=o.createEvent("HTMLEvents");if(!r)try{e.call(t,i,n||o.URL),a.initEvent("load",!1,!1)}catch(s){r=s}r&&(a.initEvent("error",!1,!1),a.error=r),t.dispatchEvent(a)}):function(){}},baseUrl:function(t){var e=t.getElementsByTagName("base"),n=t.URL;if(e.length>0){var r=e.item(0).href;r&&(n=o(n,r))}return n},resolve:function(t,e){if(null===e)return"";var n=this.baseUrl(t);return o(n,e)},download:function(t,e,n,o,r){var i,a=t.pathname+(t.search||""),s={method:"GET",host:t.hostname,path:a};if("https:"===t.protocol?(s.port=t.port||443,i=b.request(s)):(s.port=t.port||80,i=f.request(s)),o&&i.setHeader("Referer",o),e){var c=t.host.split(":")[0];c.indexOf(n,c.length-n.length)!==-1&&i.setHeader("cookie",e)}i.on("response",function(i){function a(){if([301,302,303,307].indexOf(i.statusCode)>-1){var a=p.resolve(t,i.headers.location);l.resourceLoader.download(p.parse(a),e,n,o,r)}else r(null,s)}var s="";i.setEncoding("utf8"),i.on("data",function(t){s+=t.toString()}),i.on("end",function(){i.removeAllListeners("close"),a()}),i.on("close",function(t){t?r(t):a()})}),i.on("error",r),i.end()},readFile:function(t,e){d.readFile(t.replace(/^file:\/\//,"").replace(/^\/([a-z]):\//i,"$1:/").replace(/%20/g," "),"utf8",e)}},l.HTMLCollection=function(t,e){this._keys=[],l.NodeList.call(this,t,e)},l.HTMLCollection.prototype={namedItem:function(t){if(Object.prototype.hasOwnProperty.call(this,t))return this[t];for(var e,n=this._toArray(),o=n.length,r=null,i=0;i<o;i++){if(e=n[i],e.getAttribute("id")===t)return e;e.getAttribute("name")===t&&(r=e)}return r},toString:function(){return"[ jsdom HTMLCollection ]: contains "+this.length+" items"},_resetTo:function(t){function e(t,e){var n=t.getAttribute(e);n&&!Object.prototype.hasOwnProperty.call(o,n)&&(o[n]=t,o._keys.push(n))}var n,o=this;for(n=0;n<this._keys.length;++n)delete this[this._keys[n]];for(this._keys=[],l.NodeList.prototype._resetTo.apply(this,arguments),n=0;n<t.length;++n)e(t[n],"id");for(n=0;n<t.length;++n)e(t[n],"name")}},Object.defineProperty(l.HTMLCollection.prototype,"constructor",{value:l.NodeList,writable:!0,configurable:!0}),l.HTMLCollection.prototype.__proto__=l.NodeList.prototype,l.HTMLOptionsCollection=l.HTMLCollection,c.prototype={push:function(t){var e=this,n={prev:e.tail,check:function(){e.paused||this.prev||!this.fired||(t(this.err,this.data),this.next?(this.next.prev=null,this.next.check()):e.tail=null)}};return e.tail&&(e.tail.next=n),e.tail=n,function(t,e){n.fired=1,n.err=t,n.data=e,n.check()}},resume:function(){if(this.paused){this.paused=!1;for(var t=this.tail;t&&t.prev;)t=t.prev;t&&t.check()}}},l.HTMLDocument=function(t){t=t||{},t.contentType||(t.contentType="text/html"),l.Document.call(this,t),this._referrer=t.referrer,this._cookie=t.cookie,this._cookieDomain=t.cookieDomain||"127.0.0.1",this._URL=t.url||"/",this._documentRoot=t.documentRoot||m.dirname(this._URL),this._queue=new c(t.deferClose),this.readyState="loading",this.implementation.addFeature("core","2.0"),this.implementation.addFeature("html","2.0"),this.implementation.addFeature("xhtml","2.0"),this.implementation.addFeature("xml","2.0")},l.HTMLDocument.prototype={_referrer:"",get referrer(){return this._referrer||""},get domain(){return""},_URL:"",get URL(){return this._URL},get images(){return this.getElementsByTagName("IMG")},get applets(){return new l.HTMLCollection(this,l.mapper(this,function(t){if(t&&t.tagName){var e=t.tagName.toUpperCase();if("APPLET"===e)return!0;if("OBJECT"===e&&t.getElementsByTagName("APPLET").length>0)return!0}}))},get links(){return new l.HTMLCollection(this,l.mapper(this,function(t){if(t&&t.tagName){var e=t.tagName.toUpperCase();if("AREA"===e||"A"===e&&t.href)return!0}}))},get forms(){return this.getElementsByTagName("FORM")},get anchors(){return this.getElementsByTagName("A")},open:function(){this._childNodes=new l.NodeList,this._documentElement=null,this._modified()},close:function(){this._queue.resume(),l.resourceLoader.enqueue(this,function(){this.readyState="complete";var t=this.createEvent("HTMLEvents");t.initEvent("DOMContentLoaded",!1,!1),this.dispatchEvent(t)})(null,!0)},write:function(t){if(this._writeAfterElement){var e=this.createElement("div");e.innerHTML=t;for(var n=e.firstChild,o=this._writeAfterElement,r=this._writeAfterElement.parentNode;n;){var i=n;n=n.nextSibling,r.insertBefore(i,o.nextSibling),o=i}}else if("loading"===this.readyState){for(var i=this;i.lastChild&&i.lastChild.nodeType===this.ELEMENT_NODE;)i=i.lastChild;i.innerHTML=t}else this.innerHTML=t},writeln:function(t){this.write(t+"\n")},getElementsByName:function(t){return new l.HTMLCollection(this,l.mapper(this,function(e){return e.getAttribute&&e.getAttribute("name")===t}))},get title(){var t=this.head,e=t?s(t,"TITLE"):null;return e?e.textContent:""},set title(t){var e=s(this.head,"TITLE");if(!e){e=this.createElement("TITLE");var n=this.head;n||(n=this.createElement("HEAD"),this.documentElement.insertBefore(n,this.documentElement.firstChild)),n.appendChild(e)}e.textContent=t},get head(){return s(this.documentElement,"HEAD")},set head(t){},get body(){var t=s(this.documentElement,"BODY");return t||(t=s(this.documentElement,"FRAMESET")),t},get documentElement(){return this._documentElement||(this._documentElement=s(this,"HTML")),this._documentElement},_cookie:"",get cookie(){return this._cookie||""},set cookie(t){this._cookie=t}},l.HTMLDocument.prototype.__proto__=l.Document.prototype,r("HTMLElement",{parentClass:l.Element,proto:{dispatchEvent:function(t){var e=l.Node.prototype.dispatchEvent.call(this,t);return!t._preventDefault&&t.target._eventDefaults[t.type]&&"function"==typeof t.target._eventDefaults[t.type]&&t.target._eventDefaults[t.type](t),e},getBoundingClientRect:function(){return{bottom:0,height:0,left:0,right:0,top:0,width:0}},_eventDefaults:{}},attributes:["id","title","lang","dir",{prop:"className",attr:"class",normalize:function(t){return t||""}}]}),l.Document.prototype._defaultElementBuilder=function(t,e){return new l.HTMLElement(t,e)};var g=/button|fieldset|input|keygen|object|select|textarea/i;r("HTMLFormElement",{tagName:"FORM",proto:{get elements(){return new l.HTMLCollection(this._ownerDocument,l.mapper(this,function(t){return g.test(t.nodeName)}))},get length(){return this.elements.length},_dispatchSubmitEvent:function(){var t=this._ownerDocument.createEvent("HTMLEvents");t.initEvent("submit",!0,!0),this.dispatchEvent(t)||this.submit()},submit:function(){},reset:function(){this.elements._toArray().forEach(function(t){t.value=t.defaultValue})}},attributes:["name",{prop:"acceptCharset",attr:"accept-charset"},"action","enctype","method","target"]}),r("HTMLLinkElement",{tagName:"LINK",proto:{get href(){return l.resourceLoader.resolve(this._ownerDocument,this.getAttribute("href"))}},attributes:[{prop:"disabled",type:"boolean"},"charset","href","hreflang","media","rel","rev","target","type"]}),r("HTMLMetaElement",{tagName:"META",attributes:["content",{prop:"httpEquiv",attr:"http-equiv"},"name","scheme"]}),r("HTMLHtmlElement",{tagName:"HTML",attributes:["version"]}),r("HTMLHeadElement",{tagName:"HEAD",attributes:["profile"]}),r("HTMLTitleElement",{tagName:"TITLE",proto:{get text(){return this.innerHTML},set text(t){this.innerHTML=t}}}),r("HTMLBaseElement",{tagName:"BASE",attributes:["href","target"]}),r("HTMLIsIndexElement",{tagName:"ISINDEX",parentClass:l.Element,proto:{get form(){return i(this,"FORM")}},attributes:["prompt"]}),r("HTMLStyleElement",{tagName:"STYLE",attributes:[{prop:"disabled",type:"boolean"},"media","type"]}),r("HTMLBodyElement",{proto:function(){var t={};return["onafterprint","onbeforeprint","onbeforeunload","onblur","onerror","onfocus","onhashchange","onload","onmessage","onoffline","ononline","onpagehide","onpageshow","onpopstate","onresize","onscroll","onstorage","onunload"].forEach(function(e){t.__defineSetter__(e,function(t){this._ownerDocument.parentWindow[e]=t}),t.__defineGetter__(e,function(){return this._ownerDocument.parentWindow[e]})}),t}(),tagName:"BODY",attributes:["aLink","background","bgColor","link","text","vLink"]}),r("HTMLSelectElement",{tagName:"SELECT",proto:{get options(){return new l.HTMLOptionsCollection(this,l.mapper(this,function(t){return"OPTION"===t.nodeName}))},get length(){return this.options.length},get selectedIndex(){return this.options._toArray().reduceRight(function(t,e,n){return e.selected?n:t},-1)},set selectedIndex(t){this.options._toArray().forEach(function(e,n){e.selected=n===t})},get value(){var t=this.selectedIndex;return this.options.length&&t===-1&&(t=0),t===-1?"":this.options[t].value},set value(t){var e=this;this.options._toArray().forEach(function(n){n.value===t?n.selected=!0:e.hasAttribute("multiple")||(n.selected=!1)})},get form(){return i(this,"FORM")},get type(){return this.multiple?"select-multiple":"select-one"},add:function(t,e){e?this.insertBefore(t,e):this.appendChild(t)},remove:function(t){var e=this.options._toArray();if(t>=0&&t<e.length){var n=e[t];n._parentNode.removeChild(n)}},blur:function(){this._ownerDocument.activeElement=this._ownerDocument.body},focus:function(){this._ownerDocument.activeElement=this}},attributes:[{prop:"disabled",type:"boolean"},{prop:"multiple",type:"boolean"},"name",{prop:"size",type:"long"},{prop:"tabIndex",type:"long"}]}),r("HTMLOptGroupElement",{tagName:"OPTGROUP",attributes:[{prop:"disabled",type:"boolean"},"label"]}),r("HTMLOptionElement",{tagName:"OPTION",proto:{_attrModified:function(t,e){"selected"===t&&(this.selected=this.defaultSelected),l.HTMLElement.prototype._attrModified.call(this,arguments)},get form(){return i(this,"FORM")},get defaultSelected(){return null!==this.getAttribute("selected")},set defaultSelected(t){t?this.setAttribute("selected","selected"):this.removeAttribute("selected")},get text(){return this.innerHTML},get value(){return this.hasAttribute("value")?this.getAttribute("value"):this.innerHTML},set value(t){this.setAttribute("value",t)},get index(){return i(this,"SELECT").options._toArray().indexOf(this)},get selected(){if(void 0===this._selected&&(this._selected=this.defaultSelected),!this._selected&&this.parentNode){var t=i(this,"SELECT");if(t){var e=t.options;if(e.item(0)===this&&!t.hasAttribute("multiple")){for(var n=e._toArray(),o=1,r=n.length;o<r;o++)if(n[o]._selected)return!1;return!0}}}return this._selected},set selected(t){if(this._selected=!!t,t){var e=this._parentNode;if(!e)return;if("SELECT"!==e.nodeName){if(e=e._parentNode,!e)return;if("SELECT"!==e.nodeName)return}if(!e.multiple)for(var n=e.options,o=0;o<n.length;o++)n[o]!==this&&(n[o].selected=!1)}}},attributes:[{prop:"disabled",type:"boolean"},"label"]}),r("HTMLInputElement",{tagName:"INPUT",init:function(){this.hasAttribute("type")||this.setAttribute("type","text")},proto:{_initDefaultValue:function(){if(void 0===this._defaultValue){var t=this.getAttributeNode("value");this._defaultValue=t?t.value:null}return this._defaultValue},_initDefaultChecked:function(){return void 0===this._defaultChecked&&(this._defaultChecked=!!this.getAttribute("checked")),this._defaultChecked},get form(){return i(this,"FORM")},get defaultValue(){return this._initDefaultValue()},get defaultChecked(){return this._initDefaultChecked()},get checked(){return!!this._attributes.getNamedItem("checked")},set checked(t){if(this._initDefaultChecked(),t){if(this.setAttribute("checked","checked"),"radio"===this.type)for(var e=this._ownerDocument.getElementsByName(this.name),n=0;n<e.length;n++)e[n]!==this&&"INPUT"===e[n].tagName&&"radio"===e[n].type&&(e[n].checked=!1)}else this.removeAttribute("checked")},get value(){return this.getAttribute("value")},set value(t){this._initDefaultValue(),null===t?this.removeAttribute("value"):this.setAttribute("value",t)},blur:function(){this._ownerDocument.activeElement=this._ownerDocument.body},focus:function(){this._ownerDocument.activeElement=this},select:function(){},_dispatchClickEvent:function(){var t=this._ownerDocument.createEvent("HTMLEvents");t.initEvent("click",!0,!0),this.dispatchEvent(t)},click:function(){if("checkbox"===this.type)this.checked=!this.checked;else if("radio"===this.type)this.checked=!0;else if("submit"===this.type){var t=this.form;t&&t._dispatchSubmitEvent()}this._dispatchClickEvent()}},attributes:["accept","accessKey","align","alt",{prop:"disabled",type:"boolean"},{prop:"maxLength",type:"long"},"name",{prop:"readOnly",type:"boolean"},{prop:"size",type:"long"},"src",{prop:"tabIndex",type:"long"},{prop:"type",normalize:function(t){return t?t.toLowerCase():"text"}},"useMap"]}),r("HTMLTextAreaElement",{tagName:"TEXTAREA",proto:{_initDefaultValue:function(){return void 0===this._defaultValue&&(this._defaultValue=this.textContent),this._defaultValue},get form(){return i(this,"FORM")},get defaultValue(){return this._initDefaultValue()},get value(){return this.textContent},set value(t){this._initDefaultValue(),this.textContent=t},get type(){return"textarea"},blur:function(){this._ownerDocument.activeElement=this._ownerDocument.body},focus:function(){this._ownerDocument.activeElement=this},select:function(){}},attributes:["accessKey",{prop:"cols",type:"long"},{prop:"disabled",type:"boolean"},{prop:"maxLength",type:"long"},"name",{prop:"readOnly",type:"boolean"},{prop:"rows",type:"long"},{prop:"tabIndex",type:"long"}]}),r("HTMLButtonElement",{tagName:"BUTTON",proto:{get form(){return i(this,"FORM")},focus:function(){this._ownerDocument.activeElement=this},blur:function(){this._ownerDocument.activeElement=this._ownerDocument.body}},attributes:["accessKey",{prop:"disabled",type:"boolean"},"name",{prop:"tabIndex",type:"long"},"type","value"]}),r("HTMLLabelElement",{tagName:"LABEL",proto:{get form(){return i(this,"FORM")}},attributes:["accessKey",{prop:"htmlFor",attr:"for"}]}),r("HTMLFieldSetElement",{tagName:"FIELDSET",proto:{get form(){return i(this,"FORM")}}}),r("HTMLLegendElement",{tagName:"LEGEND",proto:{get form(){return i(this,"FORM")}},attributes:["accessKey","align"]}),r("HTMLUListElement",{tagName:"UL",attributes:[{prop:"compact",type:"boolean"},"type"]}),r("HTMLOListElement",{tagName:"OL",attributes:[{prop:"compact",type:"boolean"},{prop:"start",type:"long"},"type"]}),r("HTMLDListElement",{tagName:"DL",attributes:[{prop:"compact",type:"boolean"}]}),r("HTMLDirectoryElement",{tagName:"DIR",attributes:[{prop:"compact",type:"boolean"}]}),r("HTMLMenuElement",{tagName:"MENU",attributes:[{prop:"compact",type:"boolean"}]}),r("HTMLLIElement",{tagName:"LI",attributes:["type",{prop:"value",type:"long"}]}),r("HTMLCanvasElement",{tagName:"CANVAS",attributes:["align"],elementBuilder:function(e){try{var n=new(t("canvas"))(0,0);for(var o in e)n[o]||(n[o]=e[o]);return n}catch(r){return e}}}),r("HTMLDivElement",{tagName:"DIV",attributes:["align"]}),r("HTMLParagraphElement",{tagName:"P",attributes:["align"]}),r("HTMLHeadingElement",{tagNames:["H1","H2","H3","H4","H5","H6"],attributes:["align"]}),r("HTMLQuoteElement",{tagNames:["Q","BLOCKQUOTE"],attributes:["cite"]}),r("HTMLPreElement",{tagName:"PRE",attributes:[{prop:"width",type:"long"}]}),r("HTMLBRElement",{tagName:"BR",attributes:["clear"]}),r("HTMLBaseFontElement",{tagName:"BASEFONT",attributes:["color","face",{prop:"size",type:"long"}]}),r("HTMLFontElement",{tagName:"FONT",attributes:["color","face","size"]}),r("HTMLHRElement",{tagName:"HR",attributes:["align",{prop:"noShade",type:"boolean"},"size","width"]}),r("HTMLModElement",{tagNames:["INS","DEL"],attributes:["cite","dateTime"]}),r("HTMLAnchorElement",{tagName:"A",proto:{blur:function(){this._ownerDocument.activeElement=this._ownerDocument.body},focus:function(){this._ownerDocument.activeElement=this},get href(){return l.resourceLoader.resolve(this._ownerDocument,this.getAttribute("href"))},get hostname(){return p.parse(this.href).hostname},get pathname(){return p.parse(this.href).pathname}},attributes:["accessKey","charset","coords",{prop:"href",type:"string",read:!1},"hreflang","name","rel","rev","shape",{prop:"tabIndex",type:"long"},"target","type"]}),r("HTMLImageElement",{tagName:"IMG",proto:{_attrModified:function(t,e,n){"src"==t&&e!==n&&l.resourceLoader.enqueue(this,function(){})()},get src(){return l.resourceLoader.resolve(this._ownerDocument,this.getAttribute("src"))}},attributes:["name","align","alt","border",{prop:"height",type:"long"},{prop:"hspace",type:"long"},{prop:"isMap",type:"boolean"},"longDesc",{prop:"src",type:"string",read:!1},"useMap",{prop:"vspace",type:"long"},{prop:"width",type:"long"}]}),r("HTMLObjectElement",{tagName:"OBJECT",proto:{get form(){return i(this,"FORM")},get contentDocument(){return null}},attributes:["code","align","archive","border","codeBase","codeType","data",{prop:"declare",type:"boolean"},{prop:"height",type:"long"},{prop:"hspace",type:"long"},"name","standby",{prop:"tabIndex",type:"long"},"type","useMap",{prop:"vspace",type:"long"},{prop:"width",type:"long"}]}),r("HTMLParamElement",{tagName:"PARAM",attributes:["name","type","value","valueType"]}),r("HTMLAppletElement",{tagName:"APPLET",attributes:["align","alt","archive","code","codeBase","height",{prop:"hspace",type:"long"},"name","object",{prop:"vspace",type:"long"},"width"]}),r("HTMLMapElement",{tagName:"MAP",proto:{get areas(){return this.getElementsByTagName("AREA")}},attributes:["name"]}),r("HTMLAreaElement",{tagName:"AREA",attributes:["accessKey","alt","coords","href",{prop:"noHref",type:"boolean"},"shape",{prop:"tabIndex",type:"long"},"target"]}),r("HTMLScriptElement",{tagName:"SCRIPT",init:function(){this.addEventListener("DOMNodeInsertedIntoDocument",function(){if(this.src)l.resourceLoader.load(this,this.src,this._eval);else{var t=this.sourceLocation||{},e=t.file||this._ownerDocument.URL;t&&(e+=":"+t.line+":"+t.col),e+="<script>",l.resourceLoader.enqueue(this,this._eval,e)(null,this.text)}})},proto:{_eval:function(t,e){this._ownerDocument.implementation.hasFeature("ProcessExternalResources","script")&&this.language&&l.languageProcessors[this.language]&&(this._ownerDocument._writeAfterElement=this,l.languageProcessors[this.language](this,t,e),delete this._ownerDocument._writeAfterElement)},get language(){var t=this.type||"text/javascript";return t.split("/").pop().toLowerCase()},get text(){var t=0,e=this.childNodes,n=e.length,o=[];for(t;t<n;t++)o.push(e.item(t).nodeValue);return o.join("")},set text(t){for(;this.childNodes.length;)this.removeChild(this.childNodes[0]);this.appendChild(this._ownerDocument.createTextNode(t))}},attributes:[{prop:"defer",type:"boolean"},"htmlFor","event","charset","type","src"]}),r("HTMLTableElement",{tagName:"TABLE",proto:{get caption(){return s(this,"CAPTION")},get tHead(){return s(this,"THEAD")},get tFoot(){return s(this,"TFOOT")},get rows(){if(!this._rows){var t=this;this._rows=new l.HTMLCollection(this._ownerDocument,function(){var e=[t.tHead].concat(t.tBodies._toArray(),t.tFoot).filter(function(t){return!!t});return 0===e.length?l.mapDOMNodes(t,!1,function(t){return"TR"===t.tagName}):e.reduce(function(t,e){return t.concat(e.rows._toArray())},[])})}return this._rows},get tBodies(){return this._tBodies||(this._tBodies=a(this,"TBODY",!1)),this._tBodies},createTHead:function(){var t=this.tHead;return t||(t=this._ownerDocument.createElement("THEAD"),this.appendChild(t)),t},deleteTHead:function(){var t=this.tHead;t&&t._parentNode.removeChild(t)},createTFoot:function(){var t=this.tFoot;return t||(t=this._ownerDocument.createElement("TFOOT"),this.appendChild(t)),t},deleteTFoot:function(){var t=this.tFoot;t&&t._parentNode.removeChild(t)},createCaption:function(){var t=this.caption;return t||(t=this._ownerDocument.createElement("CAPTION"),this.appendChild(t)),t},deleteCaption:function(){var t=this.caption;t&&t._parentNode.removeChild(t)},insertRow:function(t){var e=this._ownerDocument.createElement("TR");0===this.childNodes.length&&this.appendChild(this._ownerDocument.createElement("TBODY"));var n=this.rows._toArray();if(t<-1||t>n.length)throw new l.DOMException(l.INDEX_SIZE_ERR);if(t===-1||0===t&&0===n.length)this.tBodies.item(0).appendChild(e);else if(t===n.length){var o=n[t-1];o._parentNode.appendChild(e)}else{var o=n[t];o._parentNode.insertBefore(e,o)}return e},deleteRow:function(t){var e=this.rows._toArray(),n=e.length;if(t===-1&&(t=n-1),t<0||t>=n)throw new l.DOMException(l.INDEX_SIZE_ERR);var o=e[t];o._parentNode.removeChild(o)}},attributes:["align","bgColor","border","cellPadding","cellSpacing","frame","rules","summary","width"]}),r("HTMLTableCaptionElement",{tagName:"CAPTION",attributes:["align"]}),r("HTMLTableColElement",{tagNames:["COL","COLGROUP"],attributes:["align",{prop:"ch",attr:"char"},{prop:"chOff",attr:"charoff"},{prop:"span",type:"long"},"vAlign","width"]}),r("HTMLTableSectionElement",{tagNames:["THEAD","TBODY","TFOOT"],proto:{get rows(){return this._rows||(this._rows=a(this,"TR",!1)),this._rows},insertRow:function(t){var e=this._ownerDocument.createElement("TR"),n=this.rows._toArray();if(t<-1||t>n.length)throw new l.DOMException(l.INDEX_SIZE_ERR);if(t===-1||t===n.length)this.appendChild(e);else{var o=n[t];this.insertBefore(e,o)}return e},deleteRow:function(t){var e=this.rows._toArray();if(t===-1&&(t=e.length-1),t<0||t>=e.length)throw new l.DOMException(l.INDEX_SIZE_ERR);var n=this.rows[t];this.removeChild(n)}},attributes:["align",{prop:"ch",attr:"char"},{prop:"chOff",attr:"charoff"},{prop:"span",type:"long"},"vAlign","width"]}),r("HTMLTableRowElement",{tagName:"TR",proto:{get cells(){return this._cells||(this._cells=new l.HTMLCollection(this,l.mapper(this,function(t){return"TD"===t.nodeName||"TH"===t.nodeName},!1))),this._cells},get rowIndex(){var t=i(this,"TABLE");return t?t.rows._toArray().indexOf(this):-1},get sectionRowIndex(){return this._parentNode.rows._toArray().indexOf(this)},insertCell:function(t){var e=this._ownerDocument.createElement("TD"),n=this.cells._toArray();if(t<-1||t>n.length)throw new l.DOMException(l.INDEX_SIZE_ERR);if(t===-1||t===n.length)this.appendChild(e);else{var o=n[t];this.insertBefore(e,o)}return e},deleteCell:function(t){var e=this.cells._toArray();if(t===-1&&(t=e.length-1),t<0||t>=e.length)throw new l.DOMException(l.INDEX_SIZE_ERR);var n=this.cells[t];this.removeChild(n)}},attributes:["align","bgColor",{prop:"ch",attr:"char"},{prop:"chOff",attr:"charoff"},"vAlign"]}),r("HTMLTableCellElement",{tagNames:["TH","TD"],proto:{_headers:null,set headers(t){return""===t?void(this._headers=null):(t instanceof Array||(t=[t]),void(this._headers=t))},get headers(){if(this._headers)return this._headers.join(" ");for(var t=this.cellIndex,e=[],n=this._parentNode.getElementsByTagName(this.tagName),o=0;o<n.length&&!(n.item(o).cellIndex>=t);o++)e.push(n.item(o).id);return this._headers=e,e.join(" ")},get cellIndex(){return i(this,"TR").cells._toArray().indexOf(this)}},attributes:["abbr","align","axis","bgColor",{prop:"ch",attr:"char"},{prop:"chOff",attr:"charoff"},{prop:"colSpan",type:"long"},"height",{prop:"noWrap",type:"boolean"},{prop:"rowSpan",type:"long"},"scope","vAlign","width"]}),r("HTMLFrameSetElement",{tagName:"FRAMESET",attributes:["cols","rows"]}),r("HTMLFrameElement",{tagName:"FRAME",init:function(){var t=this._ownerDocument.parentWindow,e=t._length++,n=this;t.__defineGetter__(e,function(){return n.contentWindow}),this._initInsertListener=this.addEventListener("DOMNodeInsertedIntoDocument",function(){var e=n._ownerDocument,o=n.contentDocument;h(o,e.implementation._features);var r=n.contentWindow;r.parent=t,r.top=t.top},!1)},proto:{_attrModified:function(t,e,n){l.HTMLElement.prototype._attrModified.call(this,t,e,n);var o=this;"name"===t?(n&&this._ownerDocument.parentWindow._frame(n),e&&this._ownerDocument.parentWindow._frame(e,this)):"src"===t&&(this._attachedToDocument?u(o):this._waitingOnInsert||(this.removeEventListener("DOMNodeInsertedIntoDocument",this._initInsertListener,!1),this.addEventListener("DOMNodeInsertedIntoDocument",function r(){o.removeEventListener("DOMNodeInsertedIntoDocument",r,!1),this._waitingOnInsert=!1,u(o)},!1),this._waitingOnInsert=!0))},_contentDocument:null,get contentDocument(){return null==this._contentDocument&&(this._contentDocument=new l.HTMLDocument),this._contentDocument},get contentWindow(){return this.contentDocument.parentWindow}},attributes:["frameBorder","longDesc","marginHeight","marginWidth","name",{prop:"noResize",type:"boolean"},"scrolling",{prop:"src",type:"string",write:!1}]}),r("HTMLIFrameElement",{tagName:"IFRAME",parentClass:l.HTMLFrameElement,attributes:["align","frameBorder","height","longDesc","marginHeight","marginWidth","name","scrolling","src","width"]}),e.define=r,e.dom={level2:{html:l}}}});