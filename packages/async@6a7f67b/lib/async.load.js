montageDefine("6a7f67b","lib/async",{dependencies:[],factory:function(n,t,e){!function(){function n(n){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,n.apply(t,arguments)}}var t,r,i={};t=this,null!=t&&(r=t.async),i.noConflict=function(){return t.async=r,i};var c=function(n,t){if(n.forEach)return n.forEach(t);for(var e=0;e<n.length;e+=1)t(n[e],e,n)},u=function(n,t){if(n.map)return n.map(t);var e=[];return c(n,function(n,r,i){e.push(t(n,r,i))}),e},o=function(n,t,e){return n.reduce?n.reduce(t,e):(c(n,function(n,r,i){e=t(e,n,r,i)}),e)},a=function(n){if(Object.keys)return Object.keys(n);var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t};"undefined"!=typeof process&&process.nextTick?(i.nextTick=process.nextTick,"undefined"!=typeof setImmediate?i.setImmediate=function(n){setImmediate(n)}:i.setImmediate=i.nextTick):"function"==typeof setImmediate?(i.nextTick=function(n){setImmediate(n)},i.setImmediate=i.nextTick):(i.nextTick=function(n){setTimeout(n,0)},i.setImmediate=i.nextTick),i.each=function(t,e,r){if(r=r||function(){},!t.length)return r();var i=0;c(t,function(c){e(c,n(function(n){n?(r(n),r=function(){}):(i+=1,i>=t.length&&r(null))}))})},i.forEach=i.each,i.eachSeries=function(n,t,e){if(e=e||function(){},!n.length)return e();var r=0,i=function(){t(n[r],function(t){t?(e(t),e=function(){}):(r+=1,r>=n.length?e(null):i())})};i()},i.forEachSeries=i.eachSeries,i.eachLimit=function(n,t,e,r){var i=l(t);i.apply(null,[n,e,r])},i.forEachLimit=i.eachLimit;var l=function(n){return function(t,e,r){if(r=r||function(){},!t.length||n<=0)return r();var i=0,c=0,u=0;!function o(){if(i>=t.length)return r();for(;u<n&&c<t.length;)c+=1,u+=1,e(t[c-1],function(n){n?(r(n),r=function(){}):(i+=1,u-=1,i>=t.length?r():o())})}()}},f=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[i.each].concat(t))}},s=function(n,t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[l(n)].concat(e))}},p=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[i.eachSeries].concat(t))}},y=function(n,t,e,r){var i=[];t=u(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e,r){i[n.index]=r,t(e)})},function(n){r(n,i)})};i.map=f(y),i.mapSeries=p(y),i.mapLimit=function(n,t,e,r){return v(t)(n,e,r)};var v=function(n){return s(n,y)};i.reduce=function(n,t,e,r){i.eachSeries(n,function(n,r){e(t,n,function(n,e){t=e,r(n)})},function(n){r(n,t)})},i.inject=i.reduce,i.foldl=i.reduce,i.reduceRight=function(n,t,e,r){var c=u(n,function(n){return n}).reverse();i.reduce(c,t,e,r)},i.foldr=i.reduceRight;var h=function(n,t,e,r){var i=[];t=u(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e){e&&i.push(n),t()})},function(n){r(u(i.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};i.filter=f(h),i.filterSeries=p(h),i.select=i.filter,i.selectSeries=i.filterSeries;var d=function(n,t,e,r){var i=[];t=u(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e){e||i.push(n),t()})},function(n){r(u(i.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};i.reject=f(d),i.rejectSeries=p(d);var m=function(n,t,e,r){n(t,function(n,t){e(n,function(e){e?(r(n),r=function(){}):t()})},function(n){r()})};i.detect=f(m),i.detectSeries=p(m),i.some=function(n,t,e){i.each(n,function(n,r){t(n,function(n){n&&(e(!0),e=function(){}),r()})},function(n){e(!1)})},i.any=i.some,i.every=function(n,t,e){i.each(n,function(n,r){t(n,function(n){n||(e(!1),e=function(){}),r()})},function(n){e(!0)})},i.all=i.every,i.sortBy=function(n,t,e){i.map(n,function(n,e){t(n,function(t,r){t?e(t):e(null,{value:n,criteria:r})})},function(n,t){if(n)return e(n);var r=function(n,t){var e=n.criteria,r=t.criteria;return e<r?-1:e>r?1:0};e(null,u(t.sort(r),function(n){return n.value}))})},i.auto=function(n,t){t=t||function(){};var e=a(n);if(!e.length)return t(null);var r={},u=[],l=function(n){u.unshift(n)},f=function(n){for(var t=0;t<u.length;t+=1)if(u[t]===n)return void u.splice(t,1)},s=function(){c(u.slice(0),function(n){n()})};l(function(){a(r).length===e.length&&(t(null,r),t=function(){})}),c(e,function(e){var u=n[e]instanceof Function?[n[e]]:n[e],p=function(n){var u=Array.prototype.slice.call(arguments,1);if(u.length<=1&&(u=u[0]),n){var o={};c(a(r),function(n){o[n]=r[n]}),o[e]=u,t(n,o),t=function(){}}else r[e]=u,i.setImmediate(s)},y=u.slice(0,Math.abs(u.length-1))||[],v=function(){return o(y,function(n,t){return n&&r.hasOwnProperty(t)},!0)&&!r.hasOwnProperty(e)};if(v())u[u.length-1](p,r);else{var h=function(){v()&&(f(h),u[u.length-1](p,r))};l(h)}})},i.waterfall=function(n,t){if(t=t||function(){},n.constructor!==Array){var e=new Error("First argument to waterfall must be an array of functions");return t(e)}if(!n.length)return t();var r=function(n){return function(e){if(e)t.apply(null,arguments),t=function(){};else{var c=Array.prototype.slice.call(arguments,1),u=n.next();u?c.push(r(u)):c.push(t),i.setImmediate(function(){n.apply(null,c)})}}};r(i.iterator(n))()};var g=function(n,t,e){if(e=e||function(){},t.constructor===Array)n.map(t,function(n,t){n&&n(function(n){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),t.call(null,n,e)})},e);else{var r={};n.each(a(t),function(n,e){t[n](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[n]=i,e(t)})},function(n){e(n,r)})}};i.parallel=function(n,t){g({map:i.map,each:i.each},n,t)},i.parallelLimit=function(n,t,e){g({map:v(t),each:l(t)},n,e)},i.series=function(n,t){if(t=t||function(){},n.constructor===Array)i.mapSeries(n,function(n,t){n&&n(function(n){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),t.call(null,n,e)})},t);else{var e={};i.eachSeries(a(n),function(t,r){n[t](function(n){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),e[t]=i,r(n)})},function(n){t(n,e)})}},i.iterator=function(n){var t=function(e){var r=function(){return n.length&&n[e].apply(null,arguments),r.next()};return r.next=function(){return e<n.length-1?t(e+1):null},r};return t(0)},i.apply=function(n){var t=Array.prototype.slice.call(arguments,1);return function(){return n.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var k=function(n,t,e,r){var i=[];n(t,function(n,t){e(n,function(n,e){i=i.concat(e||[]),t(n)})},function(n){r(n,i)})};i.concat=f(k),i.concatSeries=p(k),i.whilst=function(n,t,e){n()?t(function(r){return r?e(r):void i.whilst(n,t,e)}):e()},i.doWhilst=function(n,t,e){n(function(r){return r?e(r):void(t()?i.doWhilst(n,t,e):e())})},i.until=function(n,t,e){n()?e():t(function(r){return r?e(r):void i.until(n,t,e)})},i.doUntil=function(n,t,e){n(function(r){return r?e(r):void(t()?e():i.doUntil(n,t,e))})},i.queue=function(t,e){function r(n,t,r,u){t.constructor!==Array&&(t=[t]),c(t,function(t){var c={data:t,callback:"function"==typeof u?u:null};r?n.tasks.unshift(c):n.tasks.push(c),n.saturated&&n.tasks.length===e&&n.saturated(),i.setImmediate(n.process)})}void 0===e&&(e=1);var u=0,o={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,push:function(n,t){r(o,n,!1,t)},unshift:function(n,t){r(o,n,!0,t)},process:function(){if(u<o.concurrency&&o.tasks.length){var e=o.tasks.shift();o.empty&&0===o.tasks.length&&o.empty(),u+=1;var r=function(){u-=1,e.callback&&e.callback.apply(e,arguments),o.drain&&o.tasks.length+u===0&&o.drain(),o.process()},i=n(r);t(e.data,i)}},length:function(){return o.tasks.length},running:function(){return u}};return o},i.cargo=function(n,t){var e=!1,r=[],o={tasks:r,payload:t,saturated:null,empty:null,drain:null,push:function(n,e){n.constructor!==Array&&(n=[n]),c(n,function(n){r.push({data:n,callback:"function"==typeof e?e:null}),o.saturated&&r.length===t&&o.saturated()}),i.setImmediate(o.process)},process:function a(){if(!e){if(0===r.length)return void(o.drain&&o.drain());var i="number"==typeof t?r.splice(0,t):r.splice(0),l=u(i,function(n){return n.data});o.empty&&o.empty(),e=!0,n(l,function(){e=!1;var n=arguments;c(i,function(t){t.callback&&t.callback.apply(null,n)}),a()})}},length:function(){return r.length},running:function(){return e}};return o};var A=function(n){return function(t){var e=Array.prototype.slice.call(arguments,1);t.apply(null,e.concat([function(t){var e=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[n]&&c(e,function(t){console[n](t)}))}]))}};i.log=A("log"),i.dir=A("dir"),i.memoize=function(n,t){var e={},r={};t=t||function(n){return n};var i=function(){var i=Array.prototype.slice.call(arguments),c=i.pop(),u=t.apply(null,i);u in e?c.apply(null,e[u]):u in r?r[u].push(c):(r[u]=[c],n.apply(null,i.concat([function(){e[u]=arguments;var n=r[u];delete r[u];for(var t=0,i=n.length;t<i;t++)n[t].apply(null,arguments)}])))};return i.memo=e,i.unmemoized=n,i},i.unmemoize=function(n){return function(){return(n.unmemoized||n).apply(null,arguments)}},i.times=function(n,t,e){for(var r=[],c=0;c<n;c++)r.push(c);return i.map(r,t,e)},i.timesSeries=function(n,t,e){for(var r=[],c=0;c<n;c++)r.push(c);return i.mapSeries(r,t,e)},i.compose=function(){var n=Array.prototype.reverse.call(arguments);return function(){var t=this,e=Array.prototype.slice.call(arguments),r=e.pop();i.reduce(n,e,function(n,e,r){e.apply(t,n.concat([function(){var n=arguments[0],t=Array.prototype.slice.call(arguments,1);r(n,t)}]))},function(n,e){r.apply(t,[n].concat(e))})}};var x=function(n,t){var e=function(){var e=this,r=Array.prototype.slice.call(arguments),i=r.pop();return n(t,function(n,t){n.apply(e,r.concat([t]))},i)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return e.apply(this,r)}return e};i.applyEach=f(x),i.applyEachSeries=p(x),i.forever=function(n,t){function e(r){if(r){if(t)return t(r);throw r}n(e)}e()},"undefined"!=typeof define&&define.amd?define([],function(){return i}):"undefined"!=typeof e&&e.exports?e.exports=i:t.async=i}()}});