montageDefine("891a5ba","core/converter/number-converter",{dependencies:["./converter","./converter","./converter","./converter","../shim/string"],factory:function(e,a,r){var t=e("./converter").Converter,n=e("./converter").Validator,l=e("./converter").isNumber,o=e("./converter").isDef;e("../shim/string");var i=/^([\-]?\d+\.?\d*)([K,M,G,T,P,k,m,u,n]?)[B]?$/,u=["P","T","B","M","K","","m","u","n"],v=a.NUMERIC_SCALES_SI_={"":1,n:1e-9,u:1e-6,m:.001,k:1e3,K:1e3,M:1e6,B:1e9,T:1e12,P:1e15},s=a.NUMERIC_SCALES_BINARY_={"":1,n:Math.pow(1024,-3),u:Math.pow(1024,-2),m:1/1024,k:1024,K:1024,M:Math.pow(1024,2),G:Math.pow(1024,3),T:Math.pow(1024,4),P:Math.pow(1024,5)},c=a._numericValueToString=function(e,a,r,t,n){n=n||u;var l=e,i="",v=1;e<0&&(e=-e);for(var s=0;s<n.length;s++){var c=n[s];if(v=a[c],e>=v||v<=1&&e>.1*v){i=c;break}}i?t&&(i+=t):v=1;var h=Math.pow(10,o(r)?r:2);return Math.round(l/v*h)/h+i},h=function(e,a){var r=e.match(i);return r?r[1]*a[r[2]]:NaN},m=(a.stringToNumericValue=function(e){return e.endsWith("B")?h(e,s):h(e,v)},a.numericValueToString=function(e,a){return c(e,v,a)}),d=a.NumberValidator=n.specialize({allowFloat:{value:!0},allowNegative:{value:!0},validate:{value:function(e){var a;return e=e||"",e=e.replace(/,/g,""),a=l(e)?e:this.allowFloat===!0?parseFloat(e,10):parseInt(e,10),isNaN(a)?{message:"Invalid Number"}:a}}});a.NumberConverter=t.specialize({allowPartialConversion:{value:!1},validator:{value:new d},shorten:{value:null},decimals:{value:2},forceDecimals:{value:!1},round:{value:null},_reg:{value:/(\d+)(\d{3})/},allowFloat:{value:!0},allowNegative:{value:!0},_makeReadable:{value:function(e,a,r){a=a||",",r=r||".";for(var t=e.toString().split("."),n=t[0];this._reg.test(n);)n=n.replace(this._reg,"$1"+a+"$2");var l=t.length>1?t[1]:"";if(this.forceDecimals)for(;l.length<this.decimals;)l+="0";var o=l.length>0?r+l:"";return n+o}},convert:{value:function(e){if(this.shorten)return m(e,this.decimals);var a;if(this.round)a=Number(Math.round(e)).toString();else{var r=Math.pow(10,this.decimals||2),t=1;a=Number(Math.round(e/t*r)/r)}return this._makeReadable(a)}},revert:{value:function(e){this.validator.allowFloat=this.allowFloat,this.validator.allowNegative=this.allowNegative;var a=this.validator.validate(e);if(l(a))return a;throw new Error(a.message)}}})}});