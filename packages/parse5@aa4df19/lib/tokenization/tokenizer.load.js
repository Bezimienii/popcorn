montageDefine("aa4df19","lib/tokenization/tokenizer",{dependencies:["./preprocessor","../common/unicode","./named_entity_trie"],factory:function(t,e,i){"use strict";function s(t){return t===C.SPACE||t===C.LINE_FEED||t===C.TABULATION||t===C.FORM_FEED}function n(t){return t>=C.DIGIT_0&&t<=C.DIGIT_9}function r(t){return t>=C.LATIN_CAPITAL_A&&t<=C.LATIN_CAPITAL_Z}function T(t){return t>=C.LATIN_SMALL_A&&t<=C.LATIN_SMALL_Z}function _(t){return n(t)||r(t)||T(t)}function h(t,e){return n(t)||e&&(t>=C.LATIN_CAPITAL_A&&t<=C.LATIN_CAPITAL_F||t>=C.LATIN_SMALL_A&&t<=C.LATIN_SMALL_F)}function o(t){return t>=55296&&t<=57343||t>1114111}function E(t){return t+32}function a(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(t>>>10&1023|55296)+String.fromCharCode(56320|1023&t))}function u(t){return String.fromCharCode(E(t))}var A=t("./preprocessor"),c=t("../common/unicode"),S=t("./named_entity_trie"),C=c.CODE_POINTS,N=c.CODE_POINT_SEQUENCES,m={0:65533,13:13,128:8364,129:129,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,141:141,142:381,143:143,144:144,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,157:157,158:382,159:376},R="DATA_STATE",I="CHARACTER_REFERENCE_IN_DATA_STATE",f="RCDATA_STATE",k="CHARACTER_REFERENCE_IN_RCDATA_STATE",O="RAWTEXT_STATE",L="SCRIPT_DATA_STATE",P="PLAINTEXT_STATE",p="TAG_OPEN_STATE",d="END_TAG_OPEN_STATE",D="TAG_NAME_STATE",H="RCDATA_LESS_THAN_SIGN_STATE",G="RCDATA_END_TAG_OPEN_STATE",l="RCDATA_END_TAG_NAME_STATE",U="RAWTEXT_LESS_THAN_SIGN_STATE",M="RAWTEXT_END_TAG_OPEN_STATE",F="RAWTEXT_END_TAG_NAME_STATE",B="SCRIPT_DATA_LESS_THAN_SIGN_STATE",Q="SCRIPT_DATA_END_TAG_OPEN_STATE",v="SCRIPT_DATA_END_TAG_NAME_STATE",y="SCRIPT_DATA_ESCAPE_START_STATE",g="SCRIPT_DATA_ESCAPE_START_DASH_STATE",K="SCRIPT_DATA_ESCAPED_STATE",Y="SCRIPT_DATA_ESCAPED_DASH_STATE",b="SCRIPT_DATA_ESCAPED_DASH_DASH_STATE",X="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE",w="SCRIPT_DATA_ESCAPED_END_TAG_OPEN_STATE",W="SCRIPT_DATA_ESCAPED_END_TAG_NAME_STATE",q="SCRIPT_DATA_DOUBLE_ESCAPE_START_STATE",V="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",x="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_STATE",z="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH_STATE",Z="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE",j="SCRIPT_DATA_DOUBLE_ESCAPE_END_STATE",J="BEFORE_ATTRIBUTE_NAME_STATE",$="ATTRIBUTE_NAME_STATE",tt="AFTER_ATTRIBUTE_NAME_STATE",et="BEFORE_ATTRIBUTE_VALUE_STATE",it="ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE",st="ATTRIBUTE_VALUE_SINGLE_QUOTED_STATE",nt="ATTRIBUTE_VALUE_UNQUOTED_STATE",rt="CHARACTER_REFERENCE_IN_ATTRIBUTE_VALUE_STATE",Tt="AFTER_ATTRIBUTE_VALUE_QUOTED_STATE",_t="SELF_CLOSING_START_TAG_STATE",ht="BOGUS_COMMENT_STATE",ot="MARKUP_DECLARATION_OPEN_STATE",Et="COMMENT_START_STATE",at="COMMENT_START_DASH_STATE",ut="COMMENT_STATE",At="COMMENT_END_DASH_STATE",ct="COMMENT_END_STATE",St="COMMENT_END_BANG_STATE",Ct="DOCTYPE_STATE",Nt="BEFORE_DOCTYPE_NAME_STATE",mt="DOCTYPE_NAME_STATE",Rt="AFTER_DOCTYPE_NAME_STATE",It="AFTER_DOCTYPE_PUBLIC_KEYWORD_STATE",ft="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER_STATE",kt="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED_STATE",Ot="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED_STATE",Lt="AFTER_DOCTYPE_PUBLIC_IDENTIFIER_STATE",Pt="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS_STATE",pt="AFTER_DOCTYPE_SYSTEM_KEYWORD_STATE",dt="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER_STATE",Dt="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE",Ht="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE",Gt="AFTER_DOCTYPE_SYSTEM_IDENTIFIER_STATE",lt="BOGUS_DOCTYPE_STATE",Ut="CDATA_SECTION_STATE",Mt=i.exports=function(t){this.preprocessor=new A(t),this.tokenQueue=[],this.allowCDATA=!1,this.state=R,this.returnState="",this.consumptionPos=0,this.tempBuff=[],this.additionalAllowedCp=void 0,this.lastStartTagName="",this.currentCharacterToken=null,this.currentToken=null,this.currentAttr=null};Mt.CHARACTER_TOKEN="CHARACTER_TOKEN",Mt.NULL_CHARACTER_TOKEN="NULL_CHARACTER_TOKEN",Mt.WHITESPACE_CHARACTER_TOKEN="WHITESPACE_CHARACTER_TOKEN",Mt.START_TAG_TOKEN="START_TAG_TOKEN",Mt.END_TAG_TOKEN="END_TAG_TOKEN",Mt.COMMENT_TOKEN="COMMENT_TOKEN",Mt.DOCTYPE_TOKEN="DOCTYPE_TOKEN",Mt.EOF_TOKEN="EOF_TOKEN",Mt.DATA_STATE=R,Mt.RCDATA_STATE=f,Mt.RAWTEXT_STATE=O,Mt.SCRIPT_DATA_STATE=L,Mt.PLAINTEXT_STATE=P,Mt.getTokenAttr=function(t,e){for(var i=t.attrs.length-1;i>=0;i--)if(t.attrs[i].name===e)return t.attrs[i].value;return null},Mt.prototype.getNextToken=function(){for(;!this.tokenQueue.length;)this[this.state](this._consume());return this.tokenQueue.shift()},Mt.prototype._consume=function(){return this.consumptionPos++,this.preprocessor.advanceAndPeekCodePoint()},Mt.prototype._unconsume=function(){this.consumptionPos--,this.preprocessor.retreat()},Mt.prototype._unconsumeSeveral=function(t){for(;t--;)this._unconsume()},Mt.prototype._reconsumeInState=function(t){this.state=t,this._unconsume()},Mt.prototype._consumeSubsequentIfMatch=function(t,e,i){for(var s=this.consumptionPos,n=!0,r=t.length,T=0,_=e,h=void 0;T<r;T++){if(T>0&&(_=this._consume()),_===C.EOF){n=!1;break}if(h=t[T],_!==h&&(i||_!==E(h))){n=!1;break}}return n||this._unconsumeSeveral(this.consumptionPos-s),n},Mt.prototype._lookahead=function(){var t=this.preprocessor.advanceAndPeekCodePoint();return this.preprocessor.retreat(),t},Mt.prototype.isTempBufferEqualToScriptString=function(){if(this.tempBuff.length!==N.SCRIPT_STRING.length)return!1;for(var t=0;t<this.tempBuff.length;t++)if(this.tempBuff[t]!==N.SCRIPT_STRING[t])return!1;return!0},Mt.prototype.buildStartTagToken=function(t){return{type:Mt.START_TAG_TOKEN,tagName:t,selfClosing:!1,attrs:[]}},Mt.prototype.buildEndTagToken=function(t){return{type:Mt.END_TAG_TOKEN,tagName:t,ignored:!1,attrs:[]}},Mt.prototype._createStartTagToken=function(t){this.currentToken=this.buildStartTagToken(t)},Mt.prototype._createEndTagToken=function(t){this.currentToken=this.buildEndTagToken(t)},Mt.prototype._createCommentToken=function(){this.currentToken={type:Mt.COMMENT_TOKEN,data:""}},Mt.prototype._createDoctypeToken=function(t){this.currentToken={type:Mt.DOCTYPE_TOKEN,name:t||"",forceQuirks:!1,publicId:null,systemId:null}},Mt.prototype._createAttr=function(t){this.currentAttr={name:t,value:""}},Mt.prototype._isDuplicateAttr=function(){return null!==Mt.getTokenAttr(this.currentToken,this.currentAttr.name)},Mt.prototype._leaveAttrName=function(t){this.state=t,this._isDuplicateAttr()||this.currentToken.attrs.push(this.currentAttr)},Mt.prototype._isAppropriateEndTagToken=function(){return this.lastStartTagName===this.currentToken.tagName},Mt.prototype._emitCurrentToken=function(){this._emitCurrentCharacterToken(),this.currentToken.type===Mt.START_TAG_TOKEN&&(this.lastStartTagName=this.currentToken.tagName),this.tokenQueue.push(this.currentToken),this.currentToken=null},Mt.prototype._emitCurrentCharacterToken=function(){this.currentCharacterToken&&(this.tokenQueue.push(this.currentCharacterToken),this.currentCharacterToken=null)},Mt.prototype._emitEOFToken=function(){this._emitCurrentCharacterToken(),this.tokenQueue.push({type:Mt.EOF_TOKEN})},Mt.prototype._appendCharToCurrentCharacterToken=function(t,e){this.currentCharacterToken&&this.currentCharacterToken.type!==t&&this._emitCurrentCharacterToken(),this.currentCharacterToken?this.currentCharacterToken.chars+=e:this.currentCharacterToken={type:t,chars:e}},Mt.prototype._emitCodePoint=function(t){var e=Mt.CHARACTER_TOKEN;s(t)?e=Mt.WHITESPACE_CHARACTER_TOKEN:t===C.NULL&&(e=Mt.NULL_CHARACTER_TOKEN),this._appendCharToCurrentCharacterToken(e,a(t))},Mt.prototype._emitSeveralCodePoints=function(t){for(var e=0;e<t.length;e++)this._emitCodePoint(t[e])},Mt.prototype._emitChar=function(t){this._appendCharToCurrentCharacterToken(Mt.CHARACTER_TOKEN,t)},Mt.prototype._consumeNumericEntity=function(t){var e="",i=void 0;do e+=a(this._consume()),i=this._lookahead();while(i!==C.EOF&&h(i,t));this._lookahead()===C.SEMICOLON&&this._consume();var s=parseInt(e,t?16:10),n=m[s];return n?n:o(s)?C.REPLACEMENT_CHARACTER:s},Mt.prototype._consumeNamedEntity=function(t,e){for(var i=null,s=0,n=t,r=S[n],T=1,h=!1;r&&n!==C.EOF;n=this._consume(),T++,r=r.l&&r.l[n])if(r.c&&(i=r.c,s=T,n===C.SEMICOLON)){h=!0;break}if(i){if(!h&&(this._unconsumeSeveral(T-s),e)){var o=this._lookahead();if(o===C.EQUALS_SIGN||_(o))return this._unconsumeSeveral(s),null}return i}return this._unconsumeSeveral(T),null},Mt.prototype._consumeCharacterReference=function(t,e){if(s(t)||t===C.GREATER_THAN_SIGN||t===C.AMPERSAND||t===this.additionalAllowedCp||t===C.EOF)return this._unconsume(),null;if(t===C.NUMBER_SIGN){var i=!1,n=this._lookahead();return n!==C.LATIN_SMALL_X&&n!==C.LATIN_CAPITAL_X||(this._consume(),i=!0),n=this._lookahead(),n!==C.EOF&&h(n,i)?[this._consumeNumericEntity(i)]:(this._unconsumeSeveral(i?2:1),null)}return this._consumeNamedEntity(t,e)};var Ft=Mt.prototype;Ft[R]=function(t){t===C.AMPERSAND?this.state=I:t===C.LESS_THAN_SIGN?this.state=p:t===C.NULL?this._emitCodePoint(t):t===C.EOF?this._emitEOFToken():this._emitCodePoint(t)},Ft[I]=function(t){this.state=R,this.additionalAllowedCp=void 0;var e=this._consumeCharacterReference(t,!1);e?this._emitSeveralCodePoints(e):this._emitChar("&")},Ft[f]=function(t){t===C.AMPERSAND?this.state=k:t===C.LESS_THAN_SIGN?this.state=H:t===C.NULL?this._emitChar(c.REPLACEMENT_CHARACTER):t===C.EOF?this._emitEOFToken():this._emitCodePoint(t)},Ft[k]=function(t){this.state=f,this.additionalAllowedCp=void 0;var e=this._consumeCharacterReference(t,!1);e?this._emitSeveralCodePoints(e):this._emitChar("&")},Ft[O]=function(t){t===C.LESS_THAN_SIGN?this.state=U:t===C.NULL?this._emitChar(c.REPLACEMENT_CHARACTER):t===C.EOF?this._emitEOFToken():this._emitCodePoint(t)},Ft[L]=function(t){t===C.LESS_THAN_SIGN?this.state=B:t===C.NULL?this._emitChar(c.REPLACEMENT_CHARACTER):t===C.EOF?this._emitEOFToken():this._emitCodePoint(t)},Ft[P]=function(t){t===C.NULL?this._emitChar(c.REPLACEMENT_CHARACTER):t===C.EOF?this._emitEOFToken():this._emitCodePoint(t)},Ft[p]=function(t){t===C.EXCLAMATION_MARK?this.state=ot:t===C.SOLIDUS?this.state=d:r(t)?(this._createStartTagToken(u(t)),this.state=D):T(t)?(this._createStartTagToken(a(t)),this.state=D):t===C.QUESTION_MARK?this[ht](t):(this._emitChar("<"),this._reconsumeInState(R))},Ft[d]=function(t){r(t)?(this._createEndTagToken(u(t)),this.state=D):T(t)?(this._createEndTagToken(a(t)),this.state=D):t===C.GREATER_THAN_SIGN?this.state=R:t===C.EOF?(this._reconsumeInState(R),this._emitChar("<"),this._emitChar("/")):this[ht](t)},Ft[D]=function(t){s(t)?this.state=J:t===C.SOLIDUS?this.state=_t:t===C.GREATER_THAN_SIGN?(this.state=R,this._emitCurrentToken()):r(t)?this.currentToken.tagName+=u(t):t===C.NULL?this.currentToken.tagName+=c.REPLACEMENT_CHARACTER:t===C.EOF?this._reconsumeInState(R):this.currentToken.tagName+=a(t)},Ft[H]=function(t){t===C.SOLIDUS?(this.tempBuff=[],this.state=G):(this._emitChar("<"),this._reconsumeInState(f))},Ft[G]=function(t){r(t)?(this._createEndTagToken(u(t)),this.tempBuff.push(t),this.state=l):T(t)?(this._createEndTagToken(a(t)),this.tempBuff.push(t),this.state=l):(this._emitChar("<"),this._emitChar("/"),this._reconsumeInState(f))},Ft[l]=function(t){if(r(t))this.currentToken.tagName+=u(t),this.tempBuff.push(t);else if(T(t))this.currentToken.tagName+=a(t),this.tempBuff.push(t);else{if(this._isAppropriateEndTagToken()){if(s(t))return void(this.state=J);if(t===C.SOLIDUS)return void(this.state=_t);if(t===C.GREATER_THAN_SIGN)return this.state=R,void this._emitCurrentToken()}this._emitChar("<"),this._emitChar("/"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState(f)}},Ft[U]=function(t){t===C.SOLIDUS?(this.tempBuff=[],this.state=M):(this._emitChar("<"),this._reconsumeInState(O))},Ft[M]=function(t){r(t)?(this._createEndTagToken(u(t)),this.tempBuff.push(t),this.state=F):T(t)?(this._createEndTagToken(a(t)),this.tempBuff.push(t),this.state=F):(this._emitChar("<"),this._emitChar("/"),this._reconsumeInState(O))},Ft[F]=function(t){if(r(t))this.currentToken.tagName+=u(t),this.tempBuff.push(t);else if(T(t))this.currentToken.tagName+=a(t),this.tempBuff.push(t);else{if(this._isAppropriateEndTagToken()){if(s(t))return void(this.state=J);if(t===C.SOLIDUS)return void(this.state=_t);if(t===C.GREATER_THAN_SIGN)return this._emitCurrentToken(),void(this.state=R)}this._emitChar("<"),this._emitChar("/"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState(O)}},Ft[B]=function(t){t===C.SOLIDUS?(this.tempBuff=[],this.state=Q):t===C.EXCLAMATION_MARK?(this.state=y,this._emitChar("<"),this._emitChar("!")):(this._emitChar("<"),this._reconsumeInState(L))},Ft[Q]=function(t){r(t)?(this._createEndTagToken(u(t)),this.tempBuff.push(t),this.state=v):T(t)?(this._createEndTagToken(a(t)),this.tempBuff.push(t),this.state=v):(this._emitChar("<"),this._emitChar("/"),this._reconsumeInState(L))},Ft[v]=function(t){if(r(t))this.currentToken.tagName+=u(t),this.tempBuff.push(t);else if(T(t))this.currentToken.tagName+=a(t),this.tempBuff.push(t);else{if(this._isAppropriateEndTagToken()){if(s(t))return void(this.state=J);if(t===C.SOLIDUS)return void(this.state=_t);if(t===C.GREATER_THAN_SIGN)return this._emitCurrentToken(),void(this.state=R)}this._emitChar("<"),this._emitChar("/"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState(L)}},Ft[y]=function(t){t===C.HYPHEN_MINUS?(this.state=g,this._emitChar("-")):this._reconsumeInState(L)},Ft[g]=function(t){t===C.HYPHEN_MINUS?(this.state=b,this._emitChar("-")):this._reconsumeInState(L)},Ft[K]=function(t){t===C.HYPHEN_MINUS?(this.state=Y,this._emitChar("-")):t===C.LESS_THAN_SIGN?this.state=X:t===C.NULL?this._emitChar(c.REPLACEMENT_CHARACTER):t===C.EOF?this._reconsumeInState(R):this._emitCodePoint(t)},Ft[Y]=function(t){t===C.HYPHEN_MINUS?(this.state=b,this._emitChar("-")):t===C.LESS_THAN_SIGN?this.state=X:t===C.NULL?(this.state=K,this._emitChar(c.REPLACEMENT_CHARACTER)):t===C.EOF?this._reconsumeInState(R):(this.state=K,this._emitCodePoint(t))},Ft[b]=function(t){t===C.HYPHEN_MINUS?this._emitChar("-"):t===C.LESS_THAN_SIGN?this.state=X:t===C.GREATER_THAN_SIGN?(this.state=L,this._emitChar(">")):t===C.NULL?(this.state=K,this._emitChar(c.REPLACEMENT_CHARACTER)):t===C.EOF?this._reconsumeInState(R):(this.state=K,this._emitCodePoint(t))},Ft[X]=function(t){t===C.SOLIDUS?(this.tempBuff=[],this.state=w):r(t)?(this.tempBuff=[],this.tempBuff.push(E(t)),this.state=q,this._emitChar("<"),this._emitCodePoint(t)):T(t)?(this.tempBuff=[],this.tempBuff.push(t),this.state=q,this._emitChar("<"),this._emitCodePoint(t)):(this._emitChar("<"),this._reconsumeInState(K))},Ft[w]=function(t){r(t)?(this._createEndTagToken(u(t)),this.tempBuff.push(t),this.state=W):T(t)?(this._createEndTagToken(a(t)),this.tempBuff.push(t),this.state=W):(this._emitChar("<"),this._emitChar("/"),this._reconsumeInState(K))},Ft[W]=function(t){if(r(t))this.currentToken.tagName+=u(t),this.tempBuff.push(t);else if(T(t))this.currentToken.tagName+=a(t),this.tempBuff.push(t);else{if(this._isAppropriateEndTagToken()){if(s(t))return void(this.state=J);if(t===C.SOLIDUS)return void(this.state=_t);if(t===C.GREATER_THAN_SIGN)return this._emitCurrentToken(),void(this.state=R)}this._emitChar("<"),this._emitChar("/"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState(K)}},Ft[q]=function(t){s(t)||t===C.SOLIDUS||t===C.GREATER_THAN_SIGN?(this.state=this.isTempBufferEqualToScriptString()?V:K,this._emitCodePoint(t)):r(t)?(this.tempBuff.push(E(t)),this._emitCodePoint(t)):T(t)?(this.tempBuff.push(t),this._emitCodePoint(t)):this._reconsumeInState(K)},Ft[V]=function(t){t===C.HYPHEN_MINUS?(this.state=x,this._emitChar("-")):t===C.LESS_THAN_SIGN?(this.state=Z,this._emitChar("<")):t===C.NULL?this._emitChar(c.REPLACEMENT_CHARACTER):t===C.EOF?this._reconsumeInState(R):this._emitCodePoint(t)},Ft[x]=function(t){t===C.HYPHEN_MINUS?(this.state=z,this._emitChar("-")):t===C.LESS_THAN_SIGN?(this.state=Z,this._emitChar("<")):t===C.NULL?(this.state=V,this._emitChar(c.REPLACEMENT_CHARACTER)):t===C.EOF?this._reconsumeInState(R):(this.state=V,this._emitCodePoint(t))},Ft[z]=function(t){t===C.HYPHEN_MINUS?this._emitChar("-"):t===C.LESS_THAN_SIGN?(this.state=Z,this._emitChar("<")):t===C.GREATER_THAN_SIGN?(this.state=L,this._emitChar(">")):t===C.NULL?(this.state=V,this._emitChar(c.REPLACEMENT_CHARACTER)):t===C.EOF?this._reconsumeInState(R):(this.state=V,this._emitCodePoint(t))},Ft[Z]=function(t){t===C.SOLIDUS?(this.tempBuff=[],this.state=j,this._emitChar("/")):this._reconsumeInState(V)},Ft[j]=function(t){s(t)||t===C.SOLIDUS||t===C.GREATER_THAN_SIGN?(this.state=this.isTempBufferEqualToScriptString()?K:V,this._emitCodePoint(t)):r(t)?(this.tempBuff.push(E(t)),this._emitCodePoint(t)):T(t)?(this.tempBuff.push(t),this._emitCodePoint(t)):this._reconsumeInState(V)},Ft[J]=function(t){s(t)||(t===C.SOLIDUS?this.state=_t:t===C.GREATER_THAN_SIGN?(this.state=R,this._emitCurrentToken()):r(t)?(this._createAttr(u(t)),this.state=$):t===C.NULL?(this._createAttr(c.REPLACEMENT_CHARACTER),this.state=$):t===C.QUOTATION_MARK||t===C.APOSTROPHE||t===C.LESS_THAN_SIGN||t===C.EQUALS_SIGN?(this._createAttr(a(t)),this.state=$):t===C.EOF?this._reconsumeInState(R):(this._createAttr(a(t)),this.state=$))},Ft[$]=function(t){s(t)?this._leaveAttrName(tt):t===C.SOLIDUS?this._leaveAttrName(_t):t===C.EQUALS_SIGN?this._leaveAttrName(et):t===C.GREATER_THAN_SIGN?(this._leaveAttrName(R),this._emitCurrentToken()):r(t)?this.currentAttr.name+=u(t):t===C.QUOTATION_MARK||t===C.APOSTROPHE||t===C.LESS_THAN_SIGN?this.currentAttr.name+=a(t):t===C.NULL?this.currentAttr.name+=c.REPLACEMENT_CHARACTER:t===C.EOF?this._reconsumeInState(R):this.currentAttr.name+=a(t)},Ft[tt]=function(t){s(t)||(t===C.SOLIDUS?this.state=_t:t===C.EQUALS_SIGN?this.state=et:t===C.GREATER_THAN_SIGN?(this.state=R,this._emitCurrentToken()):r(t)?(this._createAttr(u(t)),this.state=$):t===C.NULL?(this._createAttr(c.REPLACEMENT_CHARACTER),this.state=$):t===C.QUOTATION_MARK||t===C.APOSTROPHE||t===C.LESS_THAN_SIGN?(this._createAttr(a(t)),this.state=$):t===C.EOF?this._reconsumeInState(R):(this._createAttr(a(t)),this.state=$))},Ft[et]=function(t){s(t)||(t===C.QUOTATION_MARK?this.state=it:t===C.AMPERSAND?this._reconsumeInState(nt):t===C.APOSTROPHE?this.state=st:t===C.NULL?(this.currentAttr.value+=c.REPLACEMENT_CHARACTER,this.state=nt):t===C.GREATER_THAN_SIGN?(this.state=R,this._emitCurrentToken()):t===C.LESS_THAN_SIGN||t===C.EQUALS_SIGN||t===C.GRAVE_ACCENT?(this.currentAttr.value+=a(t),this.state=nt):t===C.EOF?this._reconsumeInState(R):(this.currentAttr.value+=a(t),this.state=nt))},Ft[it]=function(t){t===C.QUOTATION_MARK?this.state=Tt:t===C.AMPERSAND?(this.additionalAllowedCp=C.QUOTATION_MARK,this.returnState=this.state,this.state=rt):t===C.NULL?this.currentAttr.value+=c.REPLACEMENT_CHARACTER:t===C.EOF?this._reconsumeInState(R):this.currentAttr.value+=a(t)},Ft[st]=function(t){t===C.APOSTROPHE?this.state=Tt:t===C.AMPERSAND?(this.additionalAllowedCp=C.APOSTROPHE,this.returnState=this.state,this.state=rt):t===C.NULL?this.currentAttr.value+=c.REPLACEMENT_CHARACTER:t===C.EOF?this._reconsumeInState(R):this.currentAttr.value+=a(t)},Ft[nt]=function(t){s(t)?this.state=J:t===C.AMPERSAND?(this.additionalAllowedCp=C.GREATER_THAN_SIGN,this.returnState=this.state,this.state=rt):t===C.GREATER_THAN_SIGN?(this.state=R,this._emitCurrentToken()):t===C.NULL?this.currentAttr.value+=c.REPLACEMENT_CHARACTER:t===C.QUOTATION_MARK||t===C.APOSTROPHE||t===C.LESS_THAN_SIGN||t===C.EQUALS_SIGN||t===C.GRAVE_ACCENT?this.currentAttr.value+=a(t):t===C.EOF?this._reconsumeInState(R):this.currentAttr.value+=a(t)},Ft[rt]=function(t){var e=this._consumeCharacterReference(t,!0);if(e)for(var i=0;i<e.length;i++)this.currentAttr.value+=a(e[i]);else this.currentAttr.value+="&";this.state=this.returnState},Ft[Tt]=function(t){s(t)?this.state=J:t===C.SOLIDUS?this.state=_t:t===C.GREATER_THAN_SIGN?(this.state=R,this._emitCurrentToken()):t===C.EOF?this._reconsumeInState(R):this._reconsumeInState(J)},Ft[_t]=function(t){t===C.GREATER_THAN_SIGN?(this.currentToken.selfClosing=!0,this.state=R,this._emitCurrentToken()):t===C.EOF?this._reconsumeInState(R):this._reconsumeInState(J)},Ft[ht]=function(t){for(this._createCommentToken();;){if(t===C.GREATER_THAN_SIGN){this.state=R;break}if(t===C.EOF){this._reconsumeInState(R);break}this.currentToken.data+=t===C.NULL?c.REPLACEMENT_CHARACTER:a(t),t=this._consume()}this._emitCurrentToken()},Ft[ot]=function(t){this._consumeSubsequentIfMatch(N.DASH_DASH_STRING,t,!0)?(this._createCommentToken(),this.state=Et):this._consumeSubsequentIfMatch(N.DOCTYPE_STRING,t,!1)?this.state=Ct:this.allowCDATA&&this._consumeSubsequentIfMatch(N.CDATA_START_STRING,t,!0)?this.state=Ut:this[ht](t)},Ft[Et]=function(t){t===C.HYPHEN_MINUS?this.state=at:t===C.NULL?(this.currentToken.data+=c.REPLACEMENT_CHARACTER,this.state=ut):t===C.GREATER_THAN_SIGN?(this.state=R,this._emitCurrentToken()):t===C.EOF?(this._emitCurrentToken(),this._reconsumeInState(R)):(this.currentToken.data+=a(t),this.state=ut)},Ft[at]=function(t){t===C.HYPHEN_MINUS?this.state=ct:t===C.NULL?(this.currentToken.data+="-",this.currentToken.data+=c.REPLACEMENT_CHARACTER,this.state=ut):t===C.GREATER_THAN_SIGN?(this.state=R,this._emitCurrentToken()):t===C.EOF?(this._emitCurrentToken(),this._reconsumeInState(R)):(this.currentToken.data+="-",this.currentToken.data+=a(t),this.state=ut)},Ft[ut]=function(t){t===C.HYPHEN_MINUS?this.state=At:t===C.NULL?this.currentToken.data+=c.REPLACEMENT_CHARACTER:t===C.EOF?(this._emitCurrentToken(),this._reconsumeInState(R)):this.currentToken.data+=a(t)},Ft[At]=function(t){t===C.HYPHEN_MINUS?this.state=ct:t===C.NULL?(this.currentToken.data+="-",this.currentToken.data+=c.REPLACEMENT_CHARACTER,this.state=ut):t===C.EOF?(this._emitCurrentToken(),this._reconsumeInState(R)):(this.currentToken.data+="-",this.currentToken.data+=a(t),this.state=ut)},Ft[ct]=function(t){t===C.GREATER_THAN_SIGN?(this.state=R,this._emitCurrentToken()):t===C.EXCLAMATION_MARK?this.state=St:t===C.HYPHEN_MINUS?this.currentToken.data+="-":t===C.NULL?(this.currentToken.data+="--",this.currentToken.data+=c.REPLACEMENT_CHARACTER,this.state=ut):t===C.EOF?(this._reconsumeInState(R),this._emitCurrentToken()):(this.currentToken.data+="--",this.currentToken.data+=a(t),this.state=ut)},Ft[St]=function(t){t===C.HYPHEN_MINUS?(this.currentToken.data+="--!",this.state=At):t===C.GREATER_THAN_SIGN?(this.state=R,this._emitCurrentToken()):t===C.NULL?(this.currentToken.data+="--!",this.currentToken.data+=c.REPLACEMENT_CHARACTER,this.state=ut):t===C.EOF?(this._emitCurrentToken(),this._reconsumeInState(R)):(this.currentToken.data+="--!",this.currentToken.data+=a(t),this.state=ut)},Ft[Ct]=function(t){s(t)?this.state=Nt:t===C.EOF?(this._createDoctypeToken(),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._reconsumeInState(R)):this._reconsumeInState(Nt)},Ft[Nt]=function(t){s(t)||(r(t)?(this._createDoctypeToken(u(t)),this.state=mt):t===C.GREATER_THAN_SIGN?(this._createDoctypeToken(),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=R):t===C.EOF?(this._createDoctypeToken(),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._reconsumeInState(R)):t===C.NULL?(this._createDoctypeToken(c.REPLACEMENT_CHARACTER),this.state=mt):(this._createDoctypeToken(a(t)),this.state=mt))},Ft[mt]=function(t){s(t)?this.state=Rt:t===C.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=R):r(t)?this.currentToken.name+=u(t):t===C.NULL?this.currentToken.name+=c.REPLACEMENT_CHARACTER:t===C.EOF?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._reconsumeInState(R)):this.currentToken.name+=a(t)},Ft[Rt]=function(t){s(t)||(t===C.GREATER_THAN_SIGN?(this.state=R,this._emitCurrentToken()):t===C.EOF?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._reconsumeInState(R)):this._consumeSubsequentIfMatch(N.PUBLIC_STRING,t,!1)?this.state=It:this._consumeSubsequentIfMatch(N.SYSTEM_STRING,t,!1)?this.state=pt:(this.currentToken.forceQuirks=!0,this.state=lt))},Ft[It]=function(t){s(t)?this.state=ft:t===C.QUOTATION_MARK?(this.currentToken.publicId="",this.state=kt):t===C.APOSTROPHE?(this.currentToken.publicId="",this.state=Ot):t===C.GREATER_THAN_SIGN?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=R):t===C.EOF?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._reconsumeInState(R)):(this.currentToken.forceQuirks=!0,this.state=lt)},Ft[ft]=function(t){s(t)||(t===C.QUOTATION_MARK?(this.currentToken.publicId="",this.state=kt):t===C.APOSTROPHE?(this.currentToken.publicId="",this.state=Ot):t===C.GREATER_THAN_SIGN?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=R):t===C.EOF?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._reconsumeInState(R)):(this.currentToken.forceQuirks=!0,this.state=lt))},Ft[kt]=function(t){t===C.QUOTATION_MARK?this.state=Lt:t===C.NULL?this.currentToken.publicId+=c.REPLACEMENT_CHARACTER:t===C.GREATER_THAN_SIGN?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=R):t===C.EOF?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._reconsumeInState(R)):this.currentToken.publicId+=a(t)},Ft[Ot]=function(t){t===C.APOSTROPHE?this.state=Lt:t===C.NULL?this.currentToken.publicId+=c.REPLACEMENT_CHARACTER:t===C.GREATER_THAN_SIGN?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=R):t===C.EOF?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._reconsumeInState(R)):this.currentToken.publicId+=a(t)},Ft[Lt]=function(t){s(t)?this.state=Pt:t===C.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=R):t===C.QUOTATION_MARK?(this.currentToken.systemId="",this.state=Dt):t===C.APOSTROPHE?(this.currentToken.systemId="",this.state=Ht):t===C.EOF?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._reconsumeInState(R)):(this.currentToken.forceQuirks=!0,this.state=lt)},Ft[Pt]=function(t){s(t)||(t===C.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=R):t===C.QUOTATION_MARK?(this.currentToken.systemId="",this.state=Dt):t===C.APOSTROPHE?(this.currentToken.systemId="",this.state=Ht):t===C.EOF?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._reconsumeInState(R)):(this.currentToken.forceQuirks=!0,this.state=lt))},Ft[pt]=function(t){s(t)?this.state=dt:t===C.QUOTATION_MARK?(this.currentToken.systemId="",this.state=Dt):t===C.APOSTROPHE?(this.currentToken.systemId="",this.state=Ht):t===C.GREATER_THAN_SIGN?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=R):t===C.EOF?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._reconsumeInState(R)):(this.currentToken.forceQuirks=!0,this.state=lt)},Ft[dt]=function(t){s(t)||(t===C.QUOTATION_MARK?(this.currentToken.systemId="",this.state=Dt):t===C.APOSTROPHE?(this.currentToken.systemId="",this.state=Ht):t===C.GREATER_THAN_SIGN?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=R):t===C.EOF?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._reconsumeInState(R)):(this.currentToken.forceQuirks=!0,this.state=lt))},Ft[Dt]=function(t){t===C.QUOTATION_MARK?this.state=Gt:t===C.GREATER_THAN_SIGN?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=R):t===C.NULL?this.currentToken.systemId+=c.REPLACEMENT_CHARACTER:t===C.EOF?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._reconsumeInState(R)):this.currentToken.systemId+=a(t)},Ft[Ht]=function(t){t===C.APOSTROPHE?this.state=Gt:t===C.GREATER_THAN_SIGN?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=R):t===C.NULL?this.currentToken.systemId+=c.REPLACEMENT_CHARACTER:t===C.EOF?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._reconsumeInState(R)):this.currentToken.systemId+=a(t)},Ft[Gt]=function(t){s(t)||(t===C.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=R):t===C.EOF?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._reconsumeInState(R)):this.state=lt)},Ft[lt]=function(t){t===C.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=R):t===C.EOF&&(this._emitCurrentToken(),this._reconsumeInState(R))},Ft[Ut]=function(t){for(;;){if(t===C.EOF){this._reconsumeInState(R);break}if(this._consumeSubsequentIfMatch(N.CDATA_END_STRING,t,!0)){this.state=R;break}this._emitCodePoint(t),t=this._consume()}}}});