montageDefine("aa4df19","lib/tokenization/preprocessor",{dependencies:["../common/unicode"],factory:function(t,s,i){"use strict";function h(t){return t>=55296&&t<=57343||t>1114111}function o(t,s){return t>=55296&&t<=56319&&s>=56320&&s<=57343}function n(t,s){return 1024*(t-55296)+9216+s}var a=t("../common/unicode"),e=a.CODE_POINTS,r=/\r\n?/g,p=i.exports=function(t){this.write(t),this.pos=this.html.charCodeAt(0)===e.BOM?0:-1,this.gapStack=[],this.lastGapPos=-1};p.prototype.write=function(t){t=t.replace(r,"\n"),this.html?this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1,this.html.length):this.html=t,this.lastCharPos=this.html.length-1},p.prototype.advanceAndPeekCodePoint=function(){if(this.pos++,this.pos>this.lastCharPos)return e.EOF;var t=this.html.charCodeAt(this.pos);if(t>=55296){if(this.pos!==this.lastCharPos){var s=this.html.charCodeAt(this.pos+1);o(t,s)&&(this.pos++,t=n(t,s),this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos)}h(t)&&(t=e.REPLACEMENT_CHARACTER)}return t},p.prototype.retreat=function(){this.pos===this.lastGapPos&&(this.lastGapPos=this.gapStack.pop(),this.pos--),this.pos--}}});