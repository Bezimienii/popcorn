montageDefine("aa4df19","lib/tree_construction/open_element_stack",{dependencies:["../common/html"],factory:function(t,e,r){"use strict";function i(t){switch(t.length){case 1:return t===n.P;case 2:return t===n.RP||t===n.RT||t===n.DD||t===n.DT||t===n.LI;case 6:return t===n.OPTION;case 8:return t===n.OPTGROUP}return!1}function a(t,e){switch(t.length){case 2:if(t===n.TD||t===n.TH)return e===o.HTML;if(t===n.MI||t===n.MO||t==n.MN||t===n.MS)return e===o.MATHML;break;case 4:if(t===n.HTML)return e===o.HTML;if(t===n.DESC)return e===o.SVG;break;case 5:if(t===n.TABLE)return e===o.HTML;if(t===n.MTEXT)return e===o.MATHML;if(t===n.TITLE)return e===o.SVG;break;case 6:return(t===n.APPLET||t===n.OBJECT)&&e===o.HTML;case 7:return(t===n.CAPTION||t===n.MARQUEE)&&e===o.HTML;case 13:return t===n.FOREIGN_OBJECT&&e===o.SVG;case 14:return t===n.ANNOTATION_XML&&e===o.MATHML}return!1}var s=t("../common/html"),n=s.TAG_NAMES,o=s.NAMESPACES,p=r.exports=function(t,e){this.stackTop=-1,this.items=[],this.current=t,this.currentTagName=null,this.treeAdapter=e};p.prototype._indexOf=function(t){for(var e=-1,r=this.stackTop;r>=0;r--)if(this.items[r]===t){e=r;break}return e},p.prototype._updateCurrentElement=function(){this.current=this.items[this.stackTop],this.currentTagName=this.current&&this.treeAdapter.getTagName(this.current)},p.prototype.push=function(t){this.items[++this.stackTop]=t,this._updateCurrentElement()},p.prototype.pop=function(){this.stackTop--,this._updateCurrentElement()},p.prototype.replace=function(t,e){var r=this._indexOf(t);this.items[r]=e,r===this.stackTop&&this._updateCurrentElement()},p.prototype.insertAfter=function(t,e){var r=this._indexOf(t)+1;this.items.splice(r,0,e),r==++this.stackTop&&this._updateCurrentElement()},p.prototype.popUntilTagNamePopped=function(t){for(;this.stackTop>-1;){var e=this.currentTagName;if(this.pop(),e===t)break}},p.prototype.popUntilElementPopped=function(t){for(;this.stackTop>-1;){var e=this.current;if(this.pop(),e===t)break}},p.prototype.popUntilNumberedHeaderPopped=function(){for(;this.stackTop>-1;){var t=this.currentTagName;if(this.pop(),t===n.H1||t===n.H2||t===n.H3||t===n.H4||t===n.H5||t===n.H6)break}},p.prototype.popAllUpToHtmlElement=function(){this.stackTop=0,this._updateCurrentElement()},p.prototype.clearBackToTableContext=function(){for(;this.currentTagName!==n.TABLE&&this.currentTagName!==n.HTML;)this.pop()},p.prototype.clearBackToTableBodyContext=function(){for(;this.currentTagName!==n.TBODY&&this.currentTagName!==n.TFOOT&&this.currentTagName!==n.THEAD&&this.currentTagName!==n.HTML;)this.pop()},p.prototype.clearBackToTableRowContext=function(){for(;this.currentTagName!==n.TR&&this.currentTagName!==n.HTML;)this.pop()},p.prototype.remove=function(t){for(var e=this.stackTop;e>=0;e--)if(this.items[e]===t){this.items.splice(e,1),this.stackTop--,this._updateCurrentElement();break}},p.prototype.tryPeekProperlyNestedBodyElement=function(){var t=this.items[1];return t&&this.treeAdapter.getTagName(t)===n.BODY?t:null},p.prototype.contains=function(t){return this._indexOf(t)>-1},p.prototype.getCommonAncestor=function(t){var e=this._indexOf(t);return--e>=0?this.items[e]:null},p.prototype.isRootHtmlElementCurrent=function(){return 0===this.stackTop&&this.currentTagName===n.HTML},p.prototype.hasInScope=function(t){for(var e=this.stackTop;e>=0;e--){var r=this.treeAdapter.getTagName(this.items[e]);if(r===t)return!0;var i=this.treeAdapter.getNamespaceURI(this.items[e]);if(a(r,i))return!1}return!0},p.prototype.hasNumberedHeaderInScope=function(){for(var t=this.stackTop;t>=0;t--){var e=this.treeAdapter.getTagName(this.items[t]);if(e===n.H1||e===n.H2||e===n.H3||e===n.H4||e===n.H5||e===n.H6)return!0;if(a(e,this.treeAdapter.getNamespaceURI(this.items[t])))return!1}return!0},p.prototype.hasInListItemScope=function(t){for(var e=this.stackTop;e>=0;e--){var r=this.treeAdapter.getTagName(this.items[e]);if(r===t)return!0;var i=this.treeAdapter.getNamespaceURI(this.items[e]);if((r===n.UL||r===n.OL)&&i===o.HTML||a(r,i))return!1}return!0},p.prototype.hasInButtonScope=function(t){for(var e=this.stackTop;e>=0;e--){var r=this.treeAdapter.getTagName(this.items[e]);if(r===t)return!0;var i=this.treeAdapter.getNamespaceURI(this.items[e]);if(r===n.BUTTON&&i===o.HTML||a(r,i))return!1}return!0},p.prototype.hasInTableScope=function(t){for(var e=this.stackTop;e>=0;e--){var r=this.treeAdapter.getTagName(this.items[e]);if(r===t)return!0;var i=this.treeAdapter.getNamespaceURI(this.items[e]);if((r===n.TABLE||r===n.HTML)&&i===o.HTML)return!1}return!0},p.prototype.hasTableBodyContextInTableScope=function(){for(var t=this.stackTop;t>=0;t--){var e=this.treeAdapter.getTagName(this.items[t]);if(e===n.TBODY||e===n.THEAD||e===n.TFOOT)return!0;var r=this.treeAdapter.getNamespaceURI(this.items[t]);if((e===n.TABLE||e===n.HTML)&&r===o.HTML)return!1}return!0},p.prototype.hasInSelectScope=function(t){for(var e=this.stackTop;e>=0;e--){var r=this.treeAdapter.getTagName(this.items[e]);if(r===t)return!0;var i=this.treeAdapter.getNamespaceURI(this.items[e]);if(r!==n.OPTION&&r!==n.OPTGROUP&&i===o.HTML)return!1}return!0},p.prototype.generateImpliedEndTags=function(){for(;i(this.currentTagName);)this.pop()},p.prototype.generateImpliedEndTagsWithExclusion=function(t){for(;i(this.currentTagName)&&this.currentTagName!==t;)this.pop()}}});