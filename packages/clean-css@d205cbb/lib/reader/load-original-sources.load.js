montageDefine("d205cbb","lib/reader/load-original-sources",{dependencies:["fs","path","./is-allowed-resource","../utils/has-protocol","../utils/is-remote-resource"],factory:function(n,e,o){function r(n,e){var o={callback:e,fetch:n.options.fetch,index:0,inline:n.options.inline,inlineRequest:n.options.inlineRequest,inlineTimeout:n.options.inlineTimeout,localOnly:n.localOnly,rebaseTo:n.options.rebaseTo,sourcesContent:n.sourcesContent,uriToSource:i(n.inputSourceMapTracker.all()),warnings:n.warnings};return n.options.sourceMap&&n.options.sourceMapInlineSources?s(o):e()}function i(n){var e,o,r,i,s,t={};for(r in n)for(e=n[r],i=0,s=e.sources.length;i<s;i++)o=e.sources[i],r=e.sourceContentFor(o,!0),t[o]=r;return t}function s(n){var e,o,r,i=Object.keys(n.uriToSource);for(r=i.length;n.index<r;n.index++){if(e=i[n.index],o=n.uriToSource[e],!o)return t(e,n);n.sourcesContent[e]=o}return n.callback()}function t(n,e){var o;return g(n)?u(n,e,function(o){return e.index++,e.sourcesContent[n]=o,s(e)}):(o=l(n,e),e.index++,e.sourcesContent[n]=o,s(e))}function u(n,e,o){var r=f(n,!0,e.inline),i=!p(n);return e.localOnly?(e.warnings.push('Cannot fetch remote resource from "'+n+'" as no callback given.'),o(null)):i?(e.warnings.push('Cannot fetch "'+n+'" as no protocol given.'),o(null)):r?void e.fetch(n,e.inlineRequest,e.inlineTimeout,function(r,i){r&&e.warnings.push('Missing original source at "'+n+'" - '+r),o(i)}):(e.warnings.push('Cannot fetch "'+n+'" as resource is not allowed.'),o(null))}function l(n,e){var o=f(n,!1,e.inline),r=a.resolve(e.rebaseTo,n);return c.existsSync(r)&&c.statSync(r).isFile()?o?c.readFileSync(r,"utf8"):(e.warnings.push('Cannot fetch "'+r+'" as resource is not allowed.'),null):(e.warnings.push('Ignoring local source map at "'+r+'" as resource is missing.'),null)}var c=n("fs"),a=n("path"),f=n("./is-allowed-resource"),p=n("../utils/has-protocol"),g=n("../utils/is-remote-resource");o.exports=r}});