function loadRemoteResource(e,t,o,r){var u,s,i=t.protocol||t.hostname,n=!1;u=override(url.parse(e),t||{}),void 0!==t.hostname&&(u.protocol=t.protocol||HTTP_PROTOCOL,u.path=u.href),s=i&&!isHttpsResource(i)||isHttpResource(e)?http.get:https.get,s(u,function(u){var s,i=[];if(!n){if(u.statusCode<200||u.statusCode>399)return r(u.statusCode,null);if(u.statusCode>299)return s=url.resolve(e,u.headers.location),loadRemoteResource(s,t,o,r);u.on("data",function(e){i.push(e.toString())}),u.on("end",function(){var e=i.join("");r(null,e)})}}).on("error",function(e){n||(n=!0,r(e.message,null))}).on("timeout",function(){n||(n=!0,r("timeout",null))}).setTimeout(o)}var http=require("http"),https=require("https"),url=require("url"),isHttpResource=require("../utils/is-http-resource"),isHttpsResource=require("../utils/is-https-resource"),override=require("../utils/override"),HTTP_PROTOCOL="http:";module.exports=loadRemoteResource;