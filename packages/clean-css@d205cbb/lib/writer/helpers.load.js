montageDefine("d205cbb","lib/writer/helpers",{dependencies:["os","../options/format","../options/format","../tokenizer/marker","../tokenizer/token"],factory:function(e,t,n){function r(e){return"background"==e[1][1]||"transform"==e[1][1]||"src"==e[1][1]}function o(e,t){return e[t][1][e[t][1].length-1]==S.CLOSE_ROUND_BRACKET}function i(e,t){return e[t][1]==S.COMMA}function f(e,t){return e[t][1]==S.FORWARD_SLASH}function a(e,t){return e[t+1]&&e[t+1][1]==S.COMMA}function c(e,t){return e[t+1]&&e[t+1][1]==S.FORWARD_SLASH}function s(e){return"filter"==e[1][1]||"-ms-filter"==e[1][1]}function u(e,t,n){return!e.spaceAfterClosingBrace&&r(t)&&o(t,n)||c(t,n)||f(t,n)||a(t,n)||i(t,n)}function A(e,t){for(var n=e.store,r=0,o=t.length;r<o;r++)n(e,t[r]),r<o-1&&n(e,_(e))}function E(e,t){for(var n=B(t),r=0,o=t.length;r<o;r++)C(e,t,r,n)}function B(e){for(var t=e.length-1;t>=0&&e[t][0]==P.COMMENT;t--);return t}function C(e,t,n,r){var o=e.store,i=t[n],f=i[2][0]==P.PROPERTY_BLOCK,a=n<r||f,c=n===r;switch(i[0]){case P.AT_RULE:o(e,i),o(e,L(e,T.AfterProperty,!1));break;case P.AT_RULE_BLOCK:A(e,i[1]),o(e,d(e,T.AfterRuleBegins,!0)),E(e,i[2]),o(e,k(e,T.AfterRuleEnds,!1,c));break;case P.COMMENT:o(e,i);break;case P.PROPERTY:o(e,i[1]),o(e,m(e)),O(e,i),o(e,a?L(e,T.AfterProperty,c):M)}}function O(e,t){var n,r,o=e.store;if(t[2][0]==P.PROPERTY_BLOCK)o(e,d(e,T.AfterBlockBegins,!1)),E(e,t[2][1]),o(e,k(e,T.AfterBlockEnds,!1,!0));else for(n=2,r=t.length;n<r;n++)o(e,t[n]),n<r-1&&(s(t)||!u(e,t,n))&&o(e,S.SPACE)}function R(e,t){return e.format&&e.format.breaks[t]}function l(e,t){return e.format&&e.format.spaces[t]}function d(e,t,n){return e.format?(e.indentBy+=e.format.indentBy,e.indentWith=e.format.indentWith.repeat(e.indentBy),(n&&l(e,g.BeforeBlockBegins)?S.SPACE:M)+S.OPEN_CURLY_BRACKET+(R(e,t)?p:M)+e.indentWith):S.OPEN_CURLY_BRACKET}function k(e,t,n,r){return e.format?(e.indentBy-=e.format.indentBy,e.indentWith=e.format.indentWith.repeat(e.indentBy),(R(e,T.AfterProperty)||n&&R(e,T.BeforeBlockEnds)?p:M)+e.indentWith+S.CLOSE_CURLY_BRACKET+(r?M:(R(e,t)?p:M)+e.indentWith)):S.CLOSE_CURLY_BRACKET}function m(e){return e.format?S.COLON+(l(e,g.BeforeValue)?S.SPACE:M):S.COLON}function L(e,t,n){return e.format?S.SEMICOLON+(n||!R(e,t)?M:p+e.indentWith):S.SEMICOLON}function _(e){return e.format?S.COMMA+(R(e,T.BetweenSelectors)?p:M)+e.indentWith:S.COMMA}function h(e,t){var n,r,o,i,f=e.store;for(o=0,i=t.length;o<i;o++)switch(n=t[o],r=o==i-1,n[0]){case P.AT_RULE:f(e,n),f(e,L(e,T.AfterAtRule,r));break;case P.AT_RULE_BLOCK:A(e,n[1]),f(e,d(e,T.AfterRuleBegins,!0)),E(e,n[2]),f(e,k(e,T.AfterRuleEnds,!1,r));break;case P.NESTED_BLOCK:A(e,n[1]),f(e,d(e,T.AfterBlockBegins,!0)),h(e,n[2]),f(e,k(e,T.AfterBlockEnds,!0,r));break;case P.COMMENT:f(e,n),f(e,R(e,T.AfterComment)?p:M);break;case P.RULE:A(e,n[1]),f(e,d(e,T.AfterRuleBegins,!0)),E(e,n[2]),f(e,k(e,T.AfterRuleEnds,!1,r))}}var p=e("os").EOL,M="",T=e("../options/format").Breaks,g=e("../options/format").Spaces,S=e("../tokenizer/marker"),P=e("../tokenizer/token");n.exports={all:h,body:E,property:C,rules:A,value:O}}});