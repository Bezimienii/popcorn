montageDefine("d205cbb","lib/optimizer/level-2/restore",{dependencies:["./clone","../../tokenizer/token","../../tokenizer/marker"],factory:function(e,a,u){function l(e){for(var a=0,u=e.length;a<u;a++){var l=e[a][1];if("inherit"!=l&&l!=i.COMMA&&l!=i.FORWARD_SLASH)return!1}return!0}function n(e,a,u){function n(e){Array.prototype.unshift.apply(p,e.value)}function t(e){var u=a[e.name];return u.doubleValues&&1==u.defaultValue.length?e.value[0][1]==u.defaultValue[0]&&(!e.value[1]||e.value[1][1]==u.defaultValue[0]):u.doubleValues&&1!=u.defaultValue.length?e.value[0][1]==u.defaultValue[0]&&(e.value[1]?e.value[1][1]:e.value[0][1])==u.defaultValue[1]:e.value[0][1]==u.defaultValue}for(var r,o,v=e.components,p=[],f=v.length-1;f>=0;f--){var h=v[f],c=t(h);if("background-clip"==h.name){var m=v[f-1],A=t(m);r=h.value[0][1]==m.value[0][1],o=!r&&(A&&!c||!A&&!c||!A&&c&&h.value[0][1]!=m.value[0][1]),r?n(m):o&&(n(h),n(m)),f--}else if("background-size"==h.name){var R=v[f-1],g=t(R);r=!g&&c,o=!r&&(g&&!c||!g&&!c),r?n(R):o?(n(h),p.unshift([s.PROPERTY_VALUE,i.FORWARD_SLASH]),n(R)):1==R.value.length&&n(R),f--}else{if(c||a[h.name].multiplexLastOnly&&!u)continue;n(h)}}return 0===p.length&&1==e.value.length&&"0"==e.value[0][1]&&p.push(e.value[0]),0===p.length&&p.push([s.PROPERTY_VALUE,a[e.name].defaultValue]),l(p)?[p[0]]:p}function t(e,a){if(e.multiplex){for(var u=f(e),l=f(e),n=0;n<4;n++){var t=e.components[n],r=f(e);r.value=[t.value[0]],u.components.push(r);var v=f(e);v.value=[t.value[1]||t.value[0]],l.components.push(v)}var p=o(u,a),h=o(l,a);return p.length!=h.length||p[0][1]!=h[0][1]||p.length>1&&p[1][1]!=h[1][1]||p.length>2&&p[2][1]!=h[2][1]||p.length>3&&p[3][1]!=h[3][1]?p.concat([[s.PROPERTY_VALUE,i.FORWARD_SLASH]]).concat(h):p}return o(e,a)}function r(e,a){var u,n=e.components,t=[],r=0,o=0;if(0===e.value[0][1].indexOf(i.INTERNAL))return e.value[0][1]=e.value[0][1].substring(i.INTERNAL.length),e.value;for(;r<4;)u=n[r],u.value[0][1]!=a[u.name].defaultValue&&Array.prototype.push.apply(t,u.value),r++;for(Array.prototype.push.apply(t,n[r].value),r++,n[r].value[0][1]!=a[n[r].name].defaultValue&&(Array.prototype.push.apply(t,[[s.PROPERTY_VALUE,i.FORWARD_SLASH]]),Array.prototype.push.apply(t,n[r].value)),r++;n[r].value[o];)t.push(n[r].value[o]),n[r].value[o+1]&&t.push([s.PROPERTY_VALUE,i.COMMA]),o++;return l(t)?[t[0]]:t}function o(e){var a=e.components,u=a[0].value[0],l=a[1].value[0],n=a[2].value[0],t=a[3].value[0];return u[1]==l[1]&&u[1]==n[1]&&u[1]==t[1]?[u]:u[1]==n[1]&&l[1]==t[1]?[u,l]:l[1]==t[1]?[u,l,n]:[u,l,n,t]}function v(e){return function(a,u){if(!a.multiplex)return e(a,u,!0);var l,n,t=0,r=[],o={};for(l=0,n=a.components[0].value.length;l<n;l++)a.components[0].value[l][1]==i.COMMA&&t++;for(l=0;l<=t;l++){for(var v=f(a),p=0,h=a.components.length;p<h;p++){var c=a.components[p],m=f(c);v.components.push(m);for(var A=o[m.name]||0,R=c.value.length;A<R;A++){if(c.value[A][1]==i.COMMA){o[m.name]=A+1;break}m.value.push(c.value[A])}}var g=l==t,d=e(v,u,g);Array.prototype.push.apply(r,d),l<t&&r.push([s.PROPERTY_VALUE,i.COMMA])}return r}}function p(e,a){for(var u=e.components,n=[],t=u.length-1;t>=0;t--){var r=u[t],o=a[r.name];r.value[0][1]!=o.defaultValue&&n.unshift(r.value[0])}return 0===n.length&&n.push([s.PROPERTY_VALUE,a[e.name].defaultValue]),l(n)?[n[0]]:n}var f=e("./clone").shallow,s=e("../../tokenizer/token"),i=e("../../tokenizer/marker");u.exports={background:n,borderRadius:t,font:r,fourValues:o,multiplex:v,withoutDefaults:p}}});