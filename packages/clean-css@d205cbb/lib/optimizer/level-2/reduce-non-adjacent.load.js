montageDefine("d205cbb","lib/optimizer/level-2/reduce-non-adjacent",{dependencies:["./is-mergeable","./properties/optimize","../../utils/clone-array","../../tokenizer/token","../../writer/one-time","../../writer/one-time"],factory:function(e,t,i){function r(e,t){for(var i=t.options,r=i.compatibility.selectors.mergeablePseudoClasses,a=i.compatibility.selectors.mergeablePseudoElements,c=i.compatibility.selectors.multiplePseudoMerging,u={},p=[],g=e.length-1;g>=0;g--){var h=e[g];if(h[0]==f.RULE&&0!==h[2].length)for(var d=m(h[1]),b=h[1].length>1&&s(d,r,a,c),v=o(h[1]),P=b?[d].concat(v):[d],y=0,w=P.length;y<w;y++){var k=P[y];u[k]?p.push(k):u[k]=[],u[k].push({where:g,list:v,isPartial:b&&y>0,isComplex:b&&0===y})}}n(e,p,u,i,t),l(e,u,i,t)}function o(e){for(var t=[],i=0;i<e.length;i++)t.push([e[i][1]]);return t}function n(e,t,i,r,o){function n(e,t){return f[e].isPartial&&0===t.length}function l(e,t,i,r){f[i-r-1].isPartial||(e[2]=t)}for(var s=0,c=t.length;s<c;s++){var u=t[s],f=i[u];a(e,f,{filterOut:n,callback:l},r,o)}}function l(e,t,i,r){function o(e){return f.data[e].where<f.intoPosition}function n(e,t,i,r){0===r&&f.reducedBodies.push(t)}var l=i.compatibility.selectors.mergeablePseudoClasses,c=i.compatibility.selectors.mergeablePseudoElements,u=i.compatibility.selectors.multiplePseudoMerging,f={};e:for(var m in t){var g=t[m];if(g[0].isComplex){var h=g[g.length-1].where,d=e[h],b=[],v=s(m,l,c,u)?g[0].list:[m];f.intoPosition=h,f.reducedBodies=b;for(var P=0,y=v.length;P<y;P++){var w=v[P],k=t[w];if(k.length<2)continue e;if(f.data=k,a(e,k,{filterOut:o,callback:n},i,r),p(b[b.length-1])!=p(b[0]))continue e}d[2]=b[0]}}}function a(e,t,i,r,o){for(var n=[],l=[],a=[],s=t.length-1;s>=0;s--)if(!i.filterOut(s,n)){var f=t[s].where,p=e[f],m=u(p[2]);n=n.concat(m),l.push(m),a.push(f)}c(n,!0,!1,o);for(var g=a.length,h=n.length-1,d=g-1;d>=0;)if((0===d||n[h]&&l[d].indexOf(n[h])>-1)&&h>-1)h--;else{var b=n.splice(h+1);i.callback(e[a[d]],b,g,d),d--}}var s=e("./is-mergeable"),c=e("./properties/optimize"),u=e("../../utils/clone-array"),f=e("../../tokenizer/token"),p=e("../../writer/one-time").body,m=e("../../writer/one-time").rules;i.exports=r}});