montageDefine("d205cbb","lib/optimizer/level-2/break-up",{dependencies:["./invalid-property-error","../wrap-for-optimizing","../../tokenizer/token","../../tokenizer/marker","../../utils/format-position"],factory:function(e,n,i){function l(e){var n,i;for(n=0,i=e.length;n<i;n++)if("inherit"==e[n][1])return!0;return!1}function a(e){return function(n){return"invert"==n[1]||e.isColor(n[1])||e.isPrefixed(n[1])}}function t(e){return function(n){return"inherit"!=n[1]&&e.isStyleKeyword(n[1])&&!e.isColorFunction(n[1])}}function r(e,n,i){var l=i[e];return p(l.doubleValues&&2==l.defaultValue.length?[y.PROPERTY,[y.PROPERTY_NAME,e],[y.PROPERTY_VALUE,l.defaultValue[0]],[y.PROPERTY_VALUE,l.defaultValue[1]]]:l.doubleValues&&1==l.defaultValue.length?[y.PROPERTY,[y.PROPERTY_NAME,e],[y.PROPERTY_VALUE,l.defaultValue[0]]]:[y.PROPERTY,[y.PROPERTY_NAME,e],[y.PROPERTY_VALUE,l.defaultValue]])}function u(e){return function(n){return"inherit"!=n[1]&&(e.isWidth(n[1])||e.isUnit(n[1])&&!e.isDynamicUnit(n[1]))&&!e.isStyleKeyword(n[1])&&!e.isColorFunction(n[1])}}function o(e,n,i){var a,t,u,o=r(e.name+"-duration",e,n),v=r(e.name+"-timing-function",e,n),s=r(e.name+"-delay",e,n),f=r(e.name+"-iteration-count",e,n),g=r(e.name+"-direction",e,n),c=r(e.name+"-fill-mode",e,n),h=r(e.name+"-play-state",e,n),d=r(e.name+"-name",e,n),p=[o,v,s,f,g,c,h,d],y=e.value,w=!1,P=!1,b=!1,k=!1,A=!1,O=!1,E=!1,K=!1;if(1==e.value.length&&"inherit"==e.value[0][1])return o.value=v.value=s.value=f.value=g.value=c.value=h.value=d.value=e.value,p;if(y.length>1&&l(y))throw new m("Invalid animation values at "+R(y[0][2][0])+". Ignoring.");for(t=0,u=y.length;t<u;t++)if(a=y[t],i.isTime(a[1])&&!w)o.value=[a],w=!0;else if(i.isTime(a[1])&&!b)s.value=[a],b=!0;else if(!i.isGlobal(a[1])&&!i.isAnimationTimingFunction(a[1])||P)if(!i.isAnimationIterationCountKeyword(a[1])&&!i.isPositiveNumber(a[1])||k)if(i.isAnimationDirectionKeyword(a[1])&&!A)g.value=[a],A=!0;else if(i.isAnimationFillModeKeyword(a[1])&&!O)c.value=[a],O=!0;else if(i.isAnimationPlayStateKeyword(a[1])&&!E)h.value=[a],E=!0;else{if(!i.isAnimationNameKeyword(a[1])&&!i.isIdentifier(a[1])||K)throw new m("Invalid animation value at "+R(a[2][0])+". Ignoring.");d.value=[a],K=!0}else f.value=[a],k=!0;else v.value=[a],P=!0;return p}function v(e,n,i){var l=r("background-image",e,n),a=r("background-position",e,n),t=r("background-size",e,n),u=r("background-repeat",e,n),o=r("background-attachment",e,n),v=r("background-origin",e,n),s=r("background-clip",e,n),f=r("background-color",e,n),g=[l,a,t,u,o,v,s,f],c=e.value,h=!1,d=!1,p=!1,y=!1,P=!1;if(1==e.value.length&&"inherit"==e.value[0][1])return f.value=l.value=u.value=a.value=t.value=v.value=s.value=e.value,g;if(1==e.value.length&&"0 0"==e.value[0][1])return g;for(var b=c.length-1;b>=0;b--){var k=c[b];if(i.isBackgroundAttachmentKeyword(k[1]))o.value=[k],P=!0;else if(i.isBackgroundClipKeyword(k[1])||i.isBackgroundOriginKeyword(k[1]))d?(v.value=[k],p=!0):(s.value=[k],d=!0),P=!0;else if(i.isBackgroundRepeatKeyword(k[1]))y?u.value.unshift(k):(u.value=[k],y=!0),P=!0;else if(i.isBackgroundPositionKeyword(k[1])||i.isBackgroundSizeKeyword(k[1])||i.isUnit(k[1])||i.isDynamicUnit(k[1])){if(b>0){var A=c[b-1];A[1]==w.FORWARD_SLASH?t.value=[k]:b>1&&c[b-2][1]==w.FORWARD_SLASH?(t.value=[A,k],b-=2):(h||(a.value=[]),a.value.unshift(k),h=!0)}else h||(a.value=[]),a.value.unshift(k),h=!0;P=!0}else f.value[0][1]!=n[f.name].defaultValue&&"none"!=f.value[0][1]||!i.isColor(k[1])&&!i.isPrefixed(k[1])?(i.isUrl(k[1])||i.isFunction(k[1]))&&(l.value=[k],P=!0):(f.value=[k],P=!0)}if(d&&!p&&(v.value=s.value.slice(0)),!P)throw new m("Invalid background value at "+R(c[0][2][0])+". Ignoring.");return g}function s(e,n){for(var i=e.value,l=-1,a=0,t=i.length;a<t;a++)if(i[a][1]==w.FORWARD_SLASH){l=a;break}if(0===l||l===i.length-1)throw new m("Invalid border-radius value at "+R(i[0][2][0])+". Ignoring.");var u=r(e.name,e,n);u.value=l>-1?i.slice(0,l):i.slice(0),u.components=g(u,n);var o=r(e.name,e,n);o.value=l>-1?i.slice(l+1):i.slice(0),o.components=g(o,n);for(var v=0;v<4;v++)u.components[v].multiplex=!0,u.components[v].value=u.components[v].value.concat(o.components[v].value);return u.components}function f(e,n,i){var a,t,u,o,v=r("font-style",e,n),s=r("font-variant",e,n),f=r("font-weight",e,n),g=r("font-stretch",e,n),c=r("font-size",e,n),h=r("line-height",e,n),d=r("font-family",e,n),p=[v,s,f,g,c,h,d],y=e.value,P=4,b=0,k=!1,A=!1,O=!1,E=!1,K=!1,I=!1;if(!y[b])throw new m("Missing font values at "+R(e.all[e.position][1][2][0])+". Ignoring.");if(1==y.length&&"inherit"==y[0][1])return v.value=s.value=f.value=g.value=c.value=h.value=d.value=y,p;if(1==y.length&&(i.isFontKeyword(y[0][1])||i.isGlobal(y[0][1])||i.isPrefixed(y[0][1])))return y[0][1]=w.INTERNAL+y[0][1],v.value=s.value=f.value=g.value=c.value=h.value=d.value=y,p;if(y.length>1&&l(y))throw new m("Invalid font values at "+R(y[0][2][0])+". Ignoring.");for(;b<P;){if(a=i.isFontStretchKeyword(y[b][1])||i.isGlobal(y[b][1]),t=i.isFontStyleKeyword(y[b][1])||i.isGlobal(y[b][1]),u=i.isFontVariantKeyword(y[b][1])||i.isGlobal(y[b][1]),o=i.isFontWeightKeyword(y[b][1])||i.isGlobal(y[b][1]),t&&!A)v.value=[y[b]],A=!0;else if(u&&!O)s.value=[y[b]],O=!0;else if(o&&!E)f.value=[y[b]],E=!0;else{if(!a||k){if(t&&A||u&&O||o&&E||a&&k)throw new m("Invalid font style / variant / weight / stretch value at "+R(y[0][2][0])+". Ignoring.");break}g.value=[y[b]],k=!0}b++}if(!(i.isFontSizeKeyword(y[b][1])||i.isUnit(y[b][1])&&!i.isDynamicUnit(y[b][1])))throw new m("Missing font size at "+R(y[0][2][0])+". Ignoring.");if(c.value=[y[b]],K=!0,b++,!y[b])throw new m("Missing font family at "+R(y[0][2][0])+". Ignoring.");for(K&&y[b]&&y[b][1]==w.FORWARD_SLASH&&y[b+1]&&(i.isLineHeightKeyword(y[b+1][1])||i.isUnit(y[b+1][1])||i.isNumber(y[b+1][1]))&&(h.value=[y[b+1]],b++,b++),d.value=[];y[b];)y[b][1]==w.COMMA?I=!1:(I?d.value[d.value.length-1][1]+=w.SPACE+y[b][1]:d.value.push(y[b]),I=!0),b++;if(0===d.value.length)throw new m("Missing font family at "+R(y[0][2][0])+". Ignoring.");return p}function g(e,n){var i=n[e.name].components,l=[],a=e.value;if(a.length<1)return[];a.length<2&&(a[1]=a[0].slice(0)),a.length<3&&(a[2]=a[0].slice(0)),a.length<4&&(a[3]=a[1].slice(0));for(var t=i.length-1;t>=0;t--){var r=p([y.PROPERTY,[y.PROPERTY_NAME,i[t]]]);r.value=[a[t]],l.unshift(r)}return l}function c(e){return function(n,i,l){var a,t,u,o,v=[],s=n.value;for(a=0,u=s.length;a<u;a++)","==s[a][1]&&v.push(a);if(0===v.length)return e(n,i,l);var f=[];for(a=0,u=v.length;a<=u;a++){var g=0===a?0:v[a-1]+1,c=a<u?v[a]:s.length,h=r(n.name,n,i);h.value=s.slice(g,c),f.push(e(h,i,l))}var d=f[0];for(a=0,u=d.length;a<u;a++)for(d[a].multiplex=!0,t=1,o=f.length;t<o;t++)d[a].value.push([y.PROPERTY_VALUE,w.COMMA]),Array.prototype.push.apply(d[a].value,f[t][a].value);return d}}function h(e,n,i){var l=r("list-style-type",e,n),a=r("list-style-position",e,n),t=r("list-style-image",e,n),u=[l,a,t];if(1==e.value.length&&"inherit"==e.value[0][1])return l.value=a.value=t.value=[e.value[0]],u;var o=e.value.slice(0),v=o.length,s=0;for(s=0,v=o.length;s<v;s++)if(i.isUrl(o[s][1])||"0"==o[s][1]){t.value=[o[s]],o.splice(s,1);break}for(s=0,v=o.length;s<v;s++)if(i.isListStylePositionKeyword(o[s][1])){a.value=[o[s]],o.splice(s,1);break}return o.length>0&&(i.isListStyleTypeKeyword(o[0][1])||i.isIdentifier(o[0][1]))&&(l.value=[o[0]]),u}function d(e,n,i){for(var l,o,v,s=n[e.name],f=[r(s.components[0],e,n),r(s.components[1],e,n),r(s.components[2],e,n)],g=0;g<3;g++){var c=f[g];c.name.indexOf("color")>0?l=c:c.name.indexOf("style")>0?o=c:v=c}if(1==e.value.length&&"inherit"==e.value[0][1]||3==e.value.length&&"inherit"==e.value[0][1]&&"inherit"==e.value[1][1]&&"inherit"==e.value[2][1])return l.value=o.value=v.value=[e.value[0]],f;var h,d,m=e.value.slice(0);return m.length>0&&(d=m.filter(u(i)),h=d.length>1&&("none"==d[0][1]||"auto"==d[0][1])?d[1]:d[0],h&&(v.value=[h],m.splice(m.indexOf(h),1))),m.length>0&&(h=m.filter(t(i))[0],h&&(o.value=[h],m.splice(m.indexOf(h),1))),m.length>0&&(h=m.filter(a(i))[0],h&&(l.value=[h],m.splice(m.indexOf(h),1))),f}var m=e("./invalid-property-error"),p=e("../wrap-for-optimizing").single,y=e("../../tokenizer/token"),w=e("../../tokenizer/marker"),R=e("../../utils/format-position");i.exports={animation:o,background:v,border:d,borderRadius:s,font:f,fourValues:g,listStyle:h,multiplex:c,outline:d}}});