montageDefine("d205cbb","lib/optimizer/wrap-for-optimizing",{dependencies:["./hack","../tokenizer/marker","../tokenizer/token"],factory:function(n,t,e){function A(n,t,e){var A,R,r,i=[];for(r=n.length-1;r>=0;r--)R=n[r],R[0]==a.PROPERTY&&(!t&&T(R)||e&&e.indexOf(R[1][1])>-1||(A=O(R),A.all=n,A.position=r,i.unshift(A)));return i}function T(n){var t,e,A;for(t=2,e=n.length;t<e;t++)if(A=n[t],A[0]==a.PROPERTY_VALUE&&R(A[1]))return!0;return!1}function R(n){return l.VARIABLE_REFERENCE_PATTERN.test(n)}function r(n){var t,e,A;for(e=3,A=n.length;e<A;e++)if(t=n[e],t[0]==a.PROPERTY_VALUE&&(t[1]==P.COMMA||t[1]==P.FORWARD_SLASH))return!0;return!1}function i(n){var t=!1,e=n[1][1],A=n[n.length-1];return e[0]==l.UNDERSCORE?t=[_.UNDERSCORE]:e[0]==l.ASTERISK?t=[_.ASTERISK]:A[1][0]!=l.BANG||A[1].match(l.IMPORTANT_WORD_PATTERN)?A[1].indexOf(l.BANG)>0&&!A[1].match(l.IMPORTANT_WORD_PATTERN)&&l.BANG_SUFFIX_PATTERN.test(A[1])?t=[_.BANG]:A[1].indexOf(l.BACKSLASH)>0&&A[1].indexOf(l.BACKSLASH)==A[1].length-l.BACKSLASH.length-1?t=[_.BACKSLASH,A[1].substring(A[1].indexOf(l.BACKSLASH)+1)]:0===A[1].indexOf(l.BACKSLASH)&&2==A[1].length&&(t=[_.BACKSLASH,A[1].substring(1)]):t=[_.BANG],t}function E(n){if(n.length<3)return!1;var t=n[n.length-1];return!!l.IMPORTANT_TOKEN_PATTERN.test(t[1])||!(!l.IMPORTANT_WORD_PATTERN.test(t[1])||!l.SUFFIX_BANG_PATTERN.test(n[n.length-2][1]))}function N(n){var t=n[n.length-1],e=n[n.length-2];l.IMPORTANT_TOKEN_PATTERN.test(t[1])?t[1]=t[1].replace(l.IMPORTANT_TOKEN_PATTERN,""):(t[1]=t[1].replace(l.IMPORTANT_WORD_PATTERN,""),e[1]=e[1].replace(l.SUFFIX_BANG_PATTERN,"")),0===t[1].length&&n.pop(),0===e[1].length&&n.pop()}function o(n){n[1][1]=n[1][1].substring(1)}function S(n,t){var e=n[n.length-1];e[1]=e[1].substring(0,e[1].indexOf(t[0]==_.BACKSLASH?l.BACKSLASH:l.BANG)).trim(),0===e[1].length&&n.pop()}function O(n){var t=E(n);t&&N(n);var e=i(n);return e[0]==_.ASTERISK||e[0]==_.UNDERSCORE?o(n):e[0]!=_.BACKSLASH&&e[0]!=_.BANG||S(n,e),{block:n[2]&&n[2][0]==a.PROPERTY_BLOCK,components:[],dirty:!1,hack:e,important:t,name:n[1][1],multiplex:n.length>3&&r(n),position:0,shorthand:!1,unused:!1,value:n.slice(2)}}var _=n("./hack"),P=n("../tokenizer/marker"),a=n("../tokenizer/token"),l={ASTERISK:"*",BACKSLASH:"\\",BANG:"!",BANG_SUFFIX_PATTERN:/!\w+$/,IMPORTANT_TOKEN:"!important",IMPORTANT_TOKEN_PATTERN:new RegExp("!important$","i"),IMPORTANT_WORD:"important",IMPORTANT_WORD_PATTERN:new RegExp("important$","i"),SUFFIX_BANG_PATTERN:/!$/,UNDERSCORE:"_",VARIABLE_REFERENCE_PATTERN:/var\(--.+\)$/};e.exports={all:A,single:O}}});