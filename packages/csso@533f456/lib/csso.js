function getOpts(s,e,r){for(var i,o={single:[],pairs:{},other:[]},t=0;t<s.length;)i=s[t],!e||e.indexOf(i)===-1||r&&r.indexOf(i)!==-1?!r||r.indexOf(i)===-1||e&&e.indexOf(i)!==-1?o.other.push(i):o.pairs[i]=s[++t]:o.single.push(i),t++;return o.single.contains=function(s){if("string"==typeof s)return this.indexOf(s)!==-1;for(var e=0;e<s.length;e++)if(this.indexOf(s[e])!==-1)return!0;return!1},o}var fs=require("fs"),csso=require("./cssoapi.js"),src,args=process.argv.slice(2),opts=args.length?getOpts(args,["-v","--version","-h","--help","-dp","--parser","-off","--restructure-off"],["-r","--rule","-i","--input","-o","--output"]):null,single=opts&&opts.single,pairs=opts&&opts.pairs,other=opts&&opts.other,ro=single&&single.contains(["-off","--restructure-off"]),inFile=pairs&&(pairs["-i"]||pairs["--input"])||other&&other[0],outFile=pairs&&(pairs["-o"]||pairs["--output"])||other&&other[1],rule=pairs&&(pairs["-r"]||pairs["--rule"])||"stylesheet";single&&single.contains(["-v","--version"])?console.log(require(__dirname+"/../package.json").version):!inFile||!opts||single&&single.contains(["-h","--help"])||other.length>2?console.log(fs.readFileSync(__dirname+"/../USAGE","utf-8")):(src=fs.readFileSync(inFile).toString().trim(),single.contains(["-dp","--parser"])?csso.printTree(csso.cleanInfo(csso.parse(src,rule,!0))):outFile?fs.writeFileSync(outFile,csso.justDoIt(src,ro,!0)):console.log(csso.justDoIt(src,ro,!0)));