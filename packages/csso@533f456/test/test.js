function parse(r,n){return csso.parse(r,n,!0)}function clean(r,n,e){var s=parse(r,n);return e&&(s=csso.compress(s)),utils.cleanInfo(s)}function readFile(r){return fs.readFileSync(r).toString().trim()}function runTest(r,n,e){var s=readFile(n+".css"),t=path.relative(__dirname,n),a=function(r){it("in "+t,function(){assert.equal(funcs[r](s,e),readFile(n+"."+r))})};for(var i in funcs)i in r&&a(i)}function runTestsInDir(r,n){var e={};fs.readdirSync(r).forEach(function(r){var n=path.extname(r);if(n){var s=path.basename(r,n);e[s]||(e[s]={}),e[s][n.substring(1)]=1}});for(var s in e)runTest(e[s],path.join(r,s),n)}var fs=require("fs"),path=require("path"),assert=require("assert"),csso=require("../lib/cssoapi.js"),utils=require("../lib/util.js"),funcs={p:function(r,n){return csso.treeToString(clean(r,n))},l:function(r,n){return csso.translate(clean(r,n))},cl:function(r,n){return csso.translate(clean(r,n,!0))}};describe("CSSO",function(){var r=path.join(__dirname,"data");fs.readdirSync(r).forEach(function(n){var e=path.join(r,n),s=fs.statSync(e);s.isDirectory()&&runTestsInDir(e,n.substring(5))})});