montageDefine("533f456","src/compressor.shared",{dependencies:[],factory:function(e,t,r){function o(){}var s=["deg","grad","rad","turn","s","ms","Hz","kHz","dpi","dpcm","dppx"];o.prototype.init=function(){this.props={},this.shorts={},this.shorts2={},this.ccrules={},this.crules={},this.prules={},this.frrules={},this.msrules={},this.csrules={},this.rbrules={},this.rjrules={},this.rrrules={},this.frules={},this.initRules(this.crules,this.defCCfg),this.initRules(this.ccrules,this.cleanCfg),this.initRules(this.frrules,this.frCfg),this.initRules(this.prules,this.preCfg),this.initRules(this.msrules,this.msCfg),this.initRules(this.csrules,this.csCfg),this.initRules(this.rbrules,this.defRBCfg),this.initRules(this.rjrules,this.defRJCfg),this.initRules(this.rrrules,this.defRRCfg),this.initRules(this.frules,this.defFCfg),this.shortGroupID=0,this.lastShortGroupID=0,this.lastShortSelector=0},o.prototype.initRules=function(e,t){var r,o,s,n=this.order,i=this.profile,l=[];for(o=0;o<n.length;o++)n[o]in t&&l.push(n[o]);for(l.length||(l=n),o=0;o<l.length;o++){r=i[l[o]];for(s in r)e[s]?e[s].push(l[o]):e[s]=[l[o]]}},o.prototype.cleanCfg={cleanComment:1},o.prototype.defCCfg={cleanCharset:1,cleanImport:1,cleanWhitespace:1,cleanDecldelim:1,compressNumber:1,cleanUnary:1,compressColor:1,compressDimension:1,compressString:1,compressFontWeight:1,compressFont:1,compressBackground:1,cleanEmpty:1},o.prototype.defRBCfg={restructureBlock:1},o.prototype.defRJCfg={rejoinRuleset:1,cleanEmpty:1},o.prototype.defRRCfg={restructureRuleset:1,cleanEmpty:1},o.prototype.defFCfg={cleanEmpty:1,delimSelectors:1,delimBlocks:1},o.prototype.preCfg={destroyDelims:1,preTranslate:1},o.prototype.msCfg={markShorthands:1},o.prototype.frCfg={freezeRulesets:1},o.prototype.csCfg={cleanShorthands:1,cleanEmpty:1},o.prototype.order=["cleanCharset","cleanImport","cleanComment","cleanWhitespace","compressNumber","cleanUnary","compressColor","compressDimension","compressString","compressFontWeight","compressFont","compressBackground","freezeRulesets","destroyDelims","preTranslate","markShorthands","cleanShorthands","restructureBlock","rejoinRuleset","restructureRuleset","cleanEmpty","delimSelectors","delimBlocks"],o.prototype.profile={cleanCharset:{atrules:1},cleanImport:{atrules:1},cleanWhitespace:{s:1},compressNumber:{number:1},cleanUnary:{unary:1},compressColor:{vhash:1,funktion:1,ident:1},compressDimension:{dimension:1},compressString:{string:1},compressFontWeight:{declaration:1},compressFont:{declaration:1},compressBackground:{declaration:1},cleanComment:{comment:1},cleanDecldelim:{block:1},cleanEmpty:{ruleset:1,atruleb:1,atruler:1},destroyDelims:{decldelim:1,delim:1},preTranslate:{declaration:1,property:1,simpleselector:1,filter:1,value:1,number:1,percentage:1,dimension:1,ident:1},restructureBlock:{block:1},rejoinRuleset:{ruleset:1},restructureRuleset:{ruleset:1},delimSelectors:{selector:1},delimBlocks:{block:1},markShorthands:{block:1},cleanShorthands:{declaration:1},freezeRulesets:{ruleset:1}},o.prototype.isContainer=function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return!0},o.prototype.process=function(e,t,r,o,s){var n=t[1];if(n&&e[n])for(var i,l,a=e[n],c=t,l=(this.order,0);l<a.length;l++){if(i=this[a[l]](c,n,r,o,s),null===i)return null;void 0!==i&&(c=i)}return c},o.prototype.compress=function(e,t){e=e||["stylesheet"],this.init(),this.info=!0;var r,o,s,n,i,l="string"!=typeof e[0]?e:this.injectInfo([e])[0],a=1e11,c=this.findProtectedComment(e);if(l=this.walk(this.ccrules,l,"/0"),l=this.walk(this.crules,l,"/0"),l=this.walk(this.prules,l,"/0"),l=this.walk(this.frrules,l,"/0"),o=translator.translate(cleanInfo(l)).length,!t){i=this.copyArray(l),l=this.walk(this.rjrules,l,"/0"),this.disjoin(l),l=this.walk(this.msrules,l,"/0"),l=this.walk(this.csrules,l,"/0"),l=this.walk(this.rbrules,l,"/0");do r=a,s=this.copyArray(l),l=this.walk(this.rjrules,l,"/0"),l=this.walk(this.rrrules,l,"/0"),a=translator.translate(cleanInfo(l)).length,n=this.copyArray(l);while(r>a);o<r&&o<a?l=i:r<a&&(l=s)}return l=this.walk(this.frules,l,"/0"),c&&l.splice(2,0,c),l},o.prototype.findProtectedComment=function(e){for(var t,r=2;r<e.length;r++){if(t=e[r],"comment"===t[1]&&t[2].length>0&&"!"===t[2].charAt(0))return t;if("s"!==t[1])return}},o.prototype.injectInfo=function(e){for(var t,r=e.length-1;r>-1;r--)t=e[r],t&&Array.isArray(t)&&(this.isContainer(t)&&(t=this.injectInfo(t)),t.splice(0,0,{}));return e},o.prototype.disjoin=function(e){for(var t,r,o,s,n=e.length-1;n>-1;n--){if(t=e[n],t&&Array.isArray(t)&&"ruleset"===t[1]&&(t[0].shortGroupID=this.shortGroupID++,r=t[2],r.length>3)){s=r.slice(0,2);for(var i=r.length-1;i>1;i--)o=this.copyArray(t),o[2]=s.concat([r[i]]),o[2][0].s=r[i][0].s,e.splice(n+1,0,o);e.splice(n,1)}this.isContainer(t)&&this.disjoin(t)}},o.prototype.walk=function(e,t,r){for(var o,s,n=t.length-1;n>-1;n--)o=t[n],o&&Array.isArray(o)&&(o[0].parent=t,this.isContainer(o)&&(o=this.walk(e,o,r+"/"+n)),null===o?t.splice(n,1):(s=this.process(e,o,t,n,r))?t[n]=s:null===s&&t.splice(n,1));return t.length?t:null},o.prototype.freezeRulesets=function(e,t,r,o){var s=e[0],n=e[2];return s.freeze=this.freezeNeeded(n),s.freezeID=this.selectorSignature(n),s.pseudoID=this.composePseudoID(n),s.pseudoSignature=this.pseudoSelectorSignature(n,this.allowedPClasses,!0),this.markSimplePseudo(n),e},o.prototype.markSimplePseudo=function(e){for(var t,r={},o=2;o<e.length;o++)t=e[o],t[0].pseudo=this.containsPseudo(t),t[0].sg=r,r[t[0].s]=1},o.prototype.composePseudoID=function(e){for(var t,r=[],o=2;o<e.length;o++)t=e[o],this.containsPseudo(t)&&r.push(t[0].s);return r.sort(),r.join(",")},o.prototype.containsPseudo=function(e){for(var t=2;t<e.length;t++)switch(e[t][1]){case"pseudoc":case"pseudoe":case"nthselector":if(!(e[t][2][2]in this.notFPClasses))return!0}},o.prototype.selectorSignature=function(e){for(var t=[],r=2;r<e.length;r++)t.push(translator.translate(cleanInfo(e[r])));return t.sort(),t.join(",")},o.prototype.pseudoSelectorSignature=function(e,t,r){var o,s=[],n={},i=!1;t=t||{};for(var l=2;l<e.length;l++){o=e[l];for(var a=2;a<o.length;a++)switch(o[a][1]){case"pseudoc":case"pseudoe":case"nthselector":o[a][2][2]in t?i=!0:n[o[a][2][2]]=1}}for(var c in n)s.push(c);return s.sort(),s.join(",")+(r?"":i)},o.prototype.notFPClasses={link:1,visited:1,hover:1,active:1,"first-letter":1,"first-line":1},o.prototype.notFPElements={"first-letter":1,"first-line":1},o.prototype.freezeNeeded=function(e){for(var t,r=2;r<e.length;r++){t=e[r];for(var o=2;o<t.length;o++)switch(t[o][1]){case"pseudoc":if(!(t[o][2][2]in this.notFPClasses))return!0;break;case"pseudoe":if(!(t[o][2][2]in this.notFPElements))return!0;break;case"nthselector":return!0}}return!1},o.prototype.cleanCharset=function(e,t,r,o){if("charset"===e[2][2][2])for(o-=1;o>1;o--)if("s"!==r[o][1]&&"comment"!==r[o][1])return null},o.prototype.cleanImport=function(e,t,r,o){var s;for(o-=1;o>1;o--)if(s=r[o][1],"s"!==s&&"comment"!==s){if("atrules"!==s)return null;if(s=r[o][2][2][2],"import"!==s&&"charset"!==s)return null}},o.prototype.cleanComment=function(e,t,r,o){var s="braces"===r[1]&&4===o||"braces"!==r[1]&&2===o?null:r[o-1][1],n=o===r.length-1?null:r[o+1][1];return null===n||null===s?null:this._cleanComment(n)||this._cleanComment(s)?null:void 0},o.prototype._cleanComment=function(e){switch(e){case"s":case"operator":case"attrselector":case"block":case"decldelim":case"ruleset":case"declaration":case"atruleb":case"atrules":case"atruler":case"important":case"nth":case"combinator":return!0}},o.prototype.nextToken=function(e,t,r,o){for(var s,n;r<e.length;r++)if(s=e[r],Array.isArray(s)){if(n=s[1],n===t)return s;if(o&&"s"!==n)return}},o.prototype.cleanWhitespace=function(e,t,r,o){var s="braces"===r[1]&&4===o||"braces"!==r[1]&&2===o?null:r[o-1][1],n=o===r.length-1?null:r[o+1][1];if("unknown"===n)e[2]="\n";else{if(("atrulerq"!==r[1]||s)&&!this.issue16(r,o)&&!this.issue165(r,s,n)&&!this.issue134(s,n)){if(null===n||null===s)return null;if(this._cleanWhitespace(n,!1)||this._cleanWhitespace(s,!0))return null}e[2]=" "}return e},o.prototype.issue16=function(e,t){return 2!==t&&t!==e.length-1&&"uri"===e[t-1][1]},o.prototype.issue165=function(e,t,r){return"atrulerq"===e[1]&&"braces"===t&&"ident"===r},o.prototype.issue134=function(e,t){return"funktion"===e&&("funktion"===t||"vhash"===t)},o.prototype._cleanWhitespace=function(e,t){switch(e){case"s":case"operator":case"attrselector":case"block":case"decldelim":case"ruleset":case"declaration":case"atruleb":case"atrules":case"atruler":case"important":case"nth":case"combinator":return!0}if(t)switch(e){case"funktion":case"braces":case"uri":return!0}},o.prototype.cleanDecldelim=function(e){for(var t=e.length-1;t>1;t--)"decldelim"===e[t][1]&&"declaration"!==e[t+1][1]&&e.splice(t,1);return"decldelim"===e[2][1]&&e.splice(2,1),e},o.prototype.compressNumber=function(e,t,r,o){var s=e[2];return/^0*/.test(s)&&(s=s.replace(/^0+/,"")),/\.0*$/.test(s)&&(s=s.replace(/\.0*$/,"")),/\..*[1-9]+0+$/.test(s)&&(s=s.replace(/0+$/,"")),"."!==s&&""!==s||(s="0"),e[2]=s,e[0].s=s,e},o.prototype.findDeclaration=function(e){for(var t=e;(t=t[0].parent)&&"declaration"!==t[1];);return t},o.prototype.cleanUnary=function(e,t,r,o){var s=r[o+1];return s&&"number"===s[1]&&"0"===s[2]?null:e},o.prototype.compressColor=function(e,t,r,o){switch(t){case"vhash":return this.compressHashColor(e);case"funktion":return this.compressFunctionColor(e);case"ident":return this.compressIdentColor(e,t,r,o)}},o.prototype.compressIdentColor=function(e,t,r){var o={yellow:"ff0",fuchsia:"f0f",white:"fff",black:"000",blue:"00f",aqua:"0ff"},s={value:1,functionBody:1},n=e[2].toLowerCase();if(r[1]in s&&n in o)return[{},"vhash",o[n]]},o.prototype.compressHashColor=function(e){return this._compressHashColor(e[2],e[0])},o.prototype._compressHashColor=function(e,t){var r={f00:"red",c0c0c0:"silver",808080:"gray",800000:"maroon",800080:"purple","008000":"green",808000:"olive","000080":"navy","008080":"teal"},o=e;return e=e.toLowerCase(),6===e.length&&e.charAt(0)===e.charAt(1)&&e.charAt(2)===e.charAt(3)&&e.charAt(4)===e.charAt(5)&&(e=e.charAt(0)+e.charAt(2)+e.charAt(4)),r[e]?[t,"string",r[e]]:[t,"vhash",e.length<o.length?e:o]},o.prototype.compressFunctionColor=function(e){var t,r,o,s=[],n="";if("rgb"===e[2][2]){for(o=e[3],t=2;t<o.length;t++)if(r=o[t][1],"number"===r)s.push(o[t]);else if("operator"!==r){s=[];break}var i=e[0].parent,l=i.indexOf(e),a=i[l+1]&&"s"!=i[l+1][1];if(3===s.length&&(n+=1===(r=Number(s[0][2]).toString(16)).length?"0"+r:r,n+=1===(r=Number(s[1][2]).toString(16)).length?"0"+r:r,n+=1===(r=Number(s[2][2]).toString(16)).length?"0"+r:r,6===n.length)){var c=this._compressHashColor(n,{});return a&&(c[2]+=" "),c}}},o.prototype.compressDimension=function(e){if("0"===e[2][2]){if(s.indexOf(e[3][2])>=0)return;return e[2]}},o.prototype.compressString=function(e,t,r){for(var o,s=e[2],n="",i=0;i<s.length;i++)o=s.charAt(i),"\\"===o&&"\n"===s.charAt(i+1)?i++:n+=o;if(s.length!==n.length)return[{},"string",n]},o.prototype.compressFontWeight=function(e){var t=e[2],r=e[3];if(t[2][2].indexOf("font-weight")!==-1&&"ident"===r[2][1])return"normal"===r[2][2]?r[2]=[{},"number","400"]:"bold"===r[2][2]&&(r[2]=[{},"number","700"]),e},o.prototype.compressFont=function(e){var t,r,o,s=e[2],n=e[3];if(/font$/.test(s[2][2])&&n.length){for(n.splice(2,0,[{},"s",""]),t=n.length-1;t>2;t--)r=n[t],"ident"===r[1]&&(r=r[2],"bold"===r?n[t]=[{},"number","700"]:"normal"===r?(o=n[t-1],"operator"===o[1]&&"/"===o[2]?n.splice(--t,2):n.splice(t,1),"s"===n[t-1][1]&&n.splice(--t,1)):"medium"===r&&n[t+1]&&"/"!==n[t+1][2]&&(n.splice(t,1),"s"===n[t-1][1]&&n.splice(--t,1)));return n.length>2&&"s"===n[2][1]&&n.splice(2,1),2===n.length&&n.push([{},"ident","normal"]),e}},o.prototype.compressBackground=function(e){var t,r,o=e[2],s=e[3],n="important"===s[s.length-1][1]?3:2;if(/background$/.test(o[2][2])&&s.length){for(s.splice(2,0,[{},"s",""]),t=s.length-1;t>n;t--)r=s[t],"ident"===r[1]&&(r=r[2],"transparent"!==r&&"none"!==r&&"repeat"!==r&&"scroll"!==r||(s.splice(t,1),"s"===s[t-1][1]&&s.splice(--t,1)));return s.length>2&&"s"===s[2][1]&&s.splice(2,1),2===s.length&&s.splice(2,0,[{},"number","0"],[{},"s"," "],[{},"number","0"]),e}},o.prototype.cleanEmpty=function(e,t){switch(t){case"ruleset":if(2===e[3].length)return null;break;case"atruleb":if(e[e.length-1].length<3)return null;break;case"atruler":if(e[4].length<3)return null}},o.prototype.destroyDelims=function(){return null},o.prototype.preTranslate=function(e){return e[0].s=translator.translate(cleanInfo(e)),e},o.prototype.markShorthands=function(e,t,r,o,s){if("ruleset"===r[1])var n=r[2][2][0].s,i=r[0].freeze,l=r[0].freezeID;else var n="",i=!1,l="fake";for(var a,c,h,u,p,f,d,g,m=this.pathUp(s)+"/"+(i?"&"+l+"&":"")+n+"/",y=r[0].shortGroupID,b=e.length-1;b>-1;b--)if(d=!0,a=e[b],"declaration"===a[1]&&(h=a[3],u="important"===h[h.length-1][1],c=a[2][0].s,a[0].id=s+"/"+b,c in TRBL.props)){p=m+TRBL.extractMain(c);var v=this.shorts2[p]||[];g=0===v.length?0:v.length-1,this.lastShortSelector&&n!==this.lastShortSelector&&y!==this.lastShortGroupID||v.length&&(f=v[g],d=!1),d&&(a[0].replaceByShort=!0,a[0].shorthandKey={key:p,i:g},f=new TRBL(c,u),v.push(f)),f.invalid||(a[0].removeByShort=!0,a[0].shorthandKey={key:p,i:g},f.add(c,h[0].s,h.slice(2),u)),this.shorts2[p]=v,this.lastShortSelector=n,this.lastShortGroupID=y}return e},o.prototype.cleanShorthands=function(e){if(e[0].removeByShort||e[0].replaceByShort){var t,r,o=e[0].shorthandKey;if(t=this.shorts2[o.key][o.i],!t.invalid&&t.isOkToMinimize())return e[0].replaceByShort?(r=[{},"declaration",t.getProperty(),t.getValue()],r[0].s=translator.translate(cleanInfo(r)),r):null}},o.prototype.dontRestructure={src:1,clip:1,display:1},o.prototype.restructureBlock=function(e,t,r,o,s){if("ruleset"===r[1])var n=this.props,i=r[2][2][0].pseudo,l=r[2][2][0].s,a=r[0].freeze,c=r[0].freezeID,h=r[0].pseudoID,u=r[2][2][0].sg;else var n={},i=!1,l="",a=!1,c="fake",h="fake",u={};for(var p,f,d,g,m,y,b=this.pathUp(s)+"/"+l+"/",v=e.length-1;v>-1;v--)p=e[v],"declaration"===p[1]&&(d=p[3],g="important"===d[d.length-1][1],f=p[2][0].s,y=this.buildPPre(b,f,d,p,a),p[0].id=s+"/"+v,!this.dontRestructure[f]&&(m=n[y])?(i&&c===m.freezeID||!i&&h===m.pseudoID||i&&h===m.pseudoID&&this.hashInHash(u,m.sg))&&(g&&!m.imp?(n[y]={block:e,imp:g,id:p[0].id,sg:u,freeze:a,path:s,freezeID:c,pseudoID:h},this.deleteProperty(m.block,m.id)):e.splice(v,1)):this.needless(f,n,b,g,d,p,a)?e.splice(v,1):n[y]={block:e,imp:g,id:p[0].id,sg:u,freeze:a,path:s,freezeID:c,pseudoID:h});return e},o.prototype.buildPPre=function(e,t,r,o,s){var n=s?"ft:":"ff:";if(t.indexOf("background")!==-1)return n+e+o[0].s;for(var i=r.slice(2),l=[0,0,0,0],a="",c=0;c<i.length;c++)switch(a||(a=this.getVendorIDFromToken(i[c])),i[c][1]){case"vhash":case"ident":l[0]=1;break;case"funktion":switch(i[c][2][2]){case"rgb":l[0]=1;break;case"hsl":l[1]=1;break;case"hsla":l[2]=1;break;case"rgba":l[3]=1}}return n+e+t+l.join("")+(a?a:"")},o.prototype.vendorID={"-o-":"o","-moz-":"m","-webkit-":"w","-ms-":"i","-epub-":"e","-apple-":"a","-xv-":"x","-wap-":"p"},o.prototype.getVendorIDFromToken=function(e){var t;switch(e[1]){case"ident":if(t=this.getVendorFromString(e[2]))return this.vendorID[t];break;case"funktion":if(t=this.getVendorFromString(e[2][2]))return this.vendorID[t]}},o.prototype.getVendorFromString=function(e){var t,r=e.charAt(0);return"-"===r&&(t=e.indexOf("-",2))!==-1?e.substr(0,t+1):""},o.prototype.deleteProperty=function(e,t){for(var r,o=e.length-1;o>1;o--)if(r=e[o],Array.isArray(r)&&"declaration"===r[1]&&r[0].id===t)return void e.splice(o,1)},o.prototype.nlTable={"border-width":["border"],"border-style":["border"],"border-color":["border"],"border-top":["border"],"border-right":["border"],"border-bottom":["border"],"border-left":["border"],"border-top-width":["border-top","border-width","border"],"border-right-width":["border-right","border-width","border"],"border-bottom-width":["border-bottom","border-width","border"],"border-left-width":["border-left","border-width","border"],"border-top-style":["border-top","border-style","border"],"border-right-style":["border-right","border-style","border"],"border-bottom-style":["border-bottom","border-style","border"],"border-left-style":["border-left","border-style","border"],"border-top-color":["border-top","border-color","border"],"border-right-color":["border-right","border-color","border"],"border-bottom-color":["border-bottom","border-color","border"],"border-left-color":["border-left","border-color","border"],"margin-top":["margin"],"margin-right":["margin"],"margin-bottom":["margin"],"margin-left":["margin"],"padding-top":["padding"],"padding-right":["padding"],"padding-bottom":["padding"],"padding-left":["padding"],"font-style":["font"],"font-variant":["font"],"font-weight":["font"],"font-size":["font"],"font-family":["font"],"list-style-type":["list-style"],"list-style-position":["list-style"],"list-style-image":["list-style"]},o.prototype.needless=function(e,t,r,o,s,n,i){var l=e.charAt(0);"*"===l||"_"===l||"$"===l?e=e.substr(1):"/"===l&&"/"===e.charAt(1)?(l="//",e=e.substr(2)):l="";var a,c,h,u=this.getVendorFromString(e),p=e.substr(u.length);if(p in this.nlTable){a=this.nlTable[p];for(var f=0;f<a.length;f++)if(h=this.buildPPre(r,l+u+a[f],s,n,i),c=t[h])return!o||c.imp}},o.prototype.rejoinRuleset=function(e,t,r,o){var s,n,i,l=2===o||"unknown"===r[o-1][1]?null:r[o-1],a=l?l[2].slice(2):[],c=l?l[3].slice(2):[],h=e[2].slice(2),u=e[3].slice(2);if(!u.length)return null;if(a.length&&c.length&&e[0].pseudoSignature==l[0].pseudoSignature){if(e[1]!==l[1])return;if(s=this.getHash(a),n=this.getHash(h),this.equalHash(n,s))return l[3]=l[3].concat(e[3].splice(2)),null;if(this.okToJoinByProperties(e,l)&&(i=this.analyze(e,l),!i.ne1.length&&!i.ne2.length))return l[2]=this.cleanSelector(l[2].concat(e[2].splice(2))),l[2][0].s=translator.translate(cleanInfo(l[2])),null}},o.prototype.okToJoinByProperties=function(e,t){var r=e[0],o=t[0];return r.freezeID===o.freezeID||(r.pseudoID===o.pseudoID||(r.freeze&&o.freeze?this.pseudoSelectorSignature(e[2],this.allowedPClasses)===this.pseudoSelectorSignature(t[2],this.allowedPClasses):!(r.freeze||o.freeze)))},o.prototype.allowedPClasses={after:1,before:1},o.prototype.containsOnlyAllowedPClasses=function(e){for(var t,r=2;r<e.length;r++){t=e[r];for(var o=2;o<t.length;o++)if(!("pseudoc"!=t[o][1]&&"pseudoe"!=t[o][1]||t[o][2][2]in this.allowedPClasses))return!1}return!0},o.prototype.restructureRuleset=function(e,t,r,o){var s,n,i=2===o||"unknown"===r[o-1][1]?null:r[o-1],l=i?i[2].slice(2):[],a=i?i[3].slice(2):[],c=e[3].slice(2);if(!c.length)return null;if(l.length&&a.length&&e[0].pseudoSignature==i[0].pseudoSignature){if(e[1]!==i[1])return;if(s=this.analyze(e,i),s.eq.length&&(s.ne1.length||s.ne2.length))if(s.ne1.length&&!s.ne2.length){var h=e[2].slice(2),u=translator.translate(cleanInfo(e[2])),p=u.length+h.length-1,f=this.calcLength(s.eq)+s.eq.length-1;if(p<f)return i[2]=this.cleanSelector(i[2].concat(e[2].slice(2))),e[3].splice(2),e[3]=e[3].concat(s.ne1),e}else if(s.ne2.length&&!s.ne1.length){var h=i[2].slice(2),u=translator.translate(cleanInfo(i[2])),p=u.length+h.length-1,f=this.calcLength(s.eq)+s.eq.length-1;if(p<f)return e[2]=this.cleanSelector(i[2].concat(e[2].slice(2))),i[3].splice(2),i[3]=i[3].concat(s.ne2),e}else{var h=this.cleanSelector(i[2].concat(e[2].slice(2))),u=translator.translate(cleanInfo(h)),d=u.length+h.length-1+2,f=this.calcLength(s.eq)+s.eq.length-1;if(f>=d)return h[0].s=u,n=[{f:0,l:0},"ruleset",h,[{f:0,l:0},"block"].concat(s.eq)],e[3].splice(2),e[3]=e[3].concat(s.ne1),i[3].splice(2),i[3]=i[3].concat(s.ne2),r.splice(o,0,n),n}}},o.prototype.calcLength=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r][0].s.length;return t},o.prototype.cleanSelector=function(e){if(2===e.length)return null;for(var t,r={},o=2;o<e.length;o++)t=e[o][0].s,t in r?(e.splice(o,1),o--):r[t]=1;return e},o.prototype.analyze=function(e,t){var r={eq:[],ne1:[],ne2:[]};if(e[1]!==t[1])return r;var o,s,n,i,l=e[3],a=t[3],c=l.slice(2),h=a.slice(2);for(o=this.getHash(c),s=this.getHash(h),n=0;n<c.length;n++)i=c[n],i[0].s in s?r.eq.push(i):r.ne1.push(i);for(n=0;n<h.length;n++)i=h[n],i[0].s in o||r.ne2.push(i);return r},o.prototype.equalHash=function(e,t){var r;for(r in e)if(!(r in t))return!1;for(r in t)if(!(r in e))return!1;return!0},o.prototype.getHash=function(e){for(var t={},r=0;r<e.length;r++)t[e[r][0].s]=1;return t},o.prototype.hashInHash=function(e,t){for(var r in e)if(!(r in t))return!1;return!0},o.prototype.delimSelectors=function(e){for(var t=e.length-1;t>2;t--)e.splice(t,0,[{},"delim"])},o.prototype.delimBlocks=function(e){for(var t=e.length-1;t>2;t--)e.splice(t,0,[{},"decldelim"])},o.prototype.copyArray=function(e){for(var t,r=[],o=0;o<e.length;o++)t=e[o],Array.isArray(t)?r.push(this.copyArray(t)):"object"==typeof t?r.push(this.copyObject(t)):r.push(t);return r},o.prototype.copyObject=function(e){var t={};for(var r in e)t[r]=e[r];return t},o.prototype.pathUp=function(e){return e.substr(0,e.lastIndexOf("/"))}}});