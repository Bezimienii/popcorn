"use strict";function transform(r,n){var t=function(){n.out.status.apply(n.out,["Processed"].concat(Array.prototype.slice.call(arguments)))};return new Promise(function(r){var e,s,o=Object.keys(n.files);for(pending+=o.length,s=0;s<o.length;s++)e=n.files[o[s]],transformFile(e,n,function(n){return function(){t(n.path),pending--,pending||r()}}(e))}).then(function(){n.out.status()})}function transformFile(r,n,t){var e=n.fs.extension(r.location);transform.extensions[e]?transform.extensions[e](r,n,t):t&&t()}var Promise=require("bluebird"),pending=0;module.exports=transform,transform.extensions={".html":require("./transform/html"),".css":require("./transform/css"),".json":require("./transform/json"),".mjson":require("./transform/json"),".js":require("./transform/javascript")};