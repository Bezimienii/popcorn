function appcache(e,a){var i=e.packageDescription.appcache;if(i){"boolean"==typeof i&&(i={});var p=Object.keys(a.files).sort(),n=p.map(function(i){var p=a.files[i];return URL.relative(e.buildLocation,p.buildLocation)}),o=["CACHE MANIFEST"];e.packageDescription.version&&o.push("#version "+e.packageDescription.version),o.push("#hash "+e.hash),o.push.apply(o,n.filter(function(e){return!e.match(".md$")}));var c=i.fallback||{};Object.keys(c).length&&(o.push(""),o.push("FALLBACK:"),o.push.apply(o,Object.keys(c).map(function(e){return e+" "+c[e]}))),o.push(""),o.push("NETWORK:"),o.push("*");var t=o.map(function(e){return e+"\n"}).join(""),r=new File({fs:a.fs,utf8:t,buildLocation:URL.resolve(e.buildLocation,"manifest.appcache")});a.out.log("Appcache manifest: "+r.buildLocation),a.files[r.buildLocation]=r}}var File=require("./file"),URL=require("url2");module.exports=appcache;