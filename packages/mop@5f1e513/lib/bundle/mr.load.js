montageDefine("5f1e513","lib/bundle/mr",{dependencies:["../bundle","mr/bootstrap-node","url2"],factory:function(e,t,a){function n(e,t,a){return u.verifyPackageLocation(e,t,a),r(e,t,a).then(function(n){var r=i(n,t["package"],a);return u.collectPreloadBundles(n,t["package"],a).then(function(n){var i=u.createPreloadBundles(n,t,a);o(r,i,e,t,a)})})}function r(e,t,a){if(!e.hasAttribute("data-module"))throw new Error("Element needs data-module attribute in "+JSON.stringify(t.path));var n=t["package"].location;return l.loadPackage(n,a).then(function(a){return a.loadPackage({name:"mr"}).then(function(e){return e.loadPackage({name:"bluebird"})}).then(function(){return a.deepLoad(e.getAttribute("data-module"))})["catch"](function(e){throw e.message="Can't find dependencies of Mr module in "+JSON.stringify(t.path)+" because "+e.message,e}).then(function(){return a})},function(e){throw e.message="Can't load package in "+JSON.stringify(t.path)+" because "+e.message,e})}function i(e,t,a){var n=t.getPackage({name:"mr"}),r=t.getPackage({name:"bluebird"}),i=[n.files["bootstrap.js"].utf8,n.files["require.js"].utf8,n.files["browser.js"].utf8,r.files["js/browser/bluebird.min.js"].utf8];return e.getPackage({name:"bluebird"}).getModuleDescriptor("bluebird").bundled=!0,u.collectBundle(e,t,a,i)}function o(e,t,a,n,r){var i=t.map(function(e){return e.map(function(e){return r.out.log("Bundle:",e.buildLocation,e.utf8.length,"bytes"),c.relative(n.buildLocation,e.buildLocation)})});e.unshift("preload="+JSON.stringify(i)+";\n");var o=u.createBundle(e,n,r,"bundle-0");r.out.log("Bundle:",o.buildLocation,o.utf8.length,"bytes (mr bootstrap)");var l=n["package"],d=n["package"].getPackage({name:"mr"}),s=n["package"].getPackage({name:"bluebird"}),b=c.relative(n.buildLocation,o.buildLocation),f=c.relative(n.buildLocation,d.buildLocation),g=c.relative(n.buildLocation,s.buildLocation);a.setAttribute("src",b),a.setAttribute("data-mr-location",f),a.setAttribute("data-bluebird-location",g),a.setAttribute("data-mr-hash",d.hash),a.setAttribute("data-bluebird-hash",s.hash),a.setAttribute("data-application-hash",l.hash)}var u=e("../bundle"),l=e("mr/bootstrap-node"),c=e("url2");a.exports=n}});