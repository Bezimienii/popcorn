function appcache(e,a){var i=e.packageDescription.appcache;if(i){"boolean"==typeof i&&(i={});var p=Object.keys(a.files).sort(),o=p.map(function(i){var p=a.files[i];return URL.relative(e.buildLocation,p.buildLocation)}),c=["CACHE MANIFEST"];e.packageDescription.version&&c.push("#version "+e.packageDescription.version),c.push("#hash "+e.hash),c.push.apply(c,o);var n=i.fallback||{};Object.keys(n).length&&(c.push(""),c.push("FALLBACK:"),c.push.apply(c,Object.keys(n).map(function(e){return e+" "+n[e]}))),c.push(""),c.push("NETWORK:"),c.push("*");var s=c.map(function(e){return e+"\n"}).join(""),t=new File({fs:a.fs,utf8:s,buildLocation:URL.resolve(e.buildLocation,"manifest.appcache")});a.out.log("Appcache manifest: "+t.buildLocation),a.files[t.buildLocation]=t}}var File=require("./file"),URL=require("url2");module.exports=appcache;