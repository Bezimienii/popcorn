montageDefine("6fb707c","lib/bundle/montage",{dependencies:["../bundle","montage","url2","bluebird"],factory:function(e,t,a){function n(e,t,a){return u.verifyPackageLocation(e,t,a),i(e,t,a).then(function(n){var i=r(n,t["package"],a);return u.collectPreloadBundles(n,t["package"],a).then(function(n){var r=u.createPreloadBundles(n,t,a);o(i,r,e,t,a)})})}function o(e,t,a,n,o){var i=t.map(function(e){return e.map(function(e){return o.out.log("Bundle:",e.buildLocation,e.utf8.length,"bytes"),l.relative(n.buildLocation,e.buildLocation)})});e.unshift("BUNDLE="+JSON.stringify(i)+";");var r=u.createBundle(e,n,o,"bundle-0");o.out.log("Bundle:",r.buildLocation,r.utf8.length,"bytes (montage bootstrap)");var c=n["package"],d=n["package"].getPackage({name:"montage"}),g=n["package"].getPackage({name:"bluebird"}),s=l.relative(n.buildLocation,r.buildLocation),b=l.relative(n.buildLocation,d.buildLocation),f=l.relative(n.buildLocation,g.buildLocation);a.setAttribute("src",s),a.setAttribute("data-montage-location",b),a.setAttribute("data-promise-location",f),a.setAttribute("data-montage-hash",d.hash),a.setAttribute("data-promise-hash",g.hash),a.setAttribute("data-application-hash",c.hash)}function i(e,t,a){var n=t["package"].location,o=t["package"].getPackage({name:"montage"}).location;return c.loadPackage(n,a).then(function(a){return a.loadPackage(o).then(function(e){var t=l.resolve(e.location,"node_modules/bluebird");return[e,e.loadPackage({location:t})]}).spread(function(e){return d.all(["core/core","core/event/event-manager","core/serialization/deserializer/montage-reviver","core/logger"].map(e.deepLoad))}).then(function(){return a.deepLoad(t.relativeLocation)["catch"](function(e){throw e.message="Can't find dependencies of HTML application "+JSON.stringify(t.location)+" because "+e.message,e}).then(function(){if(e.hasAttribute("data-module"))return a.deepLoad(e.getAttribute("data-module"))["catch"](function(t){throw t.message="Can't find dependencies of HTML application data-module "+JSON.stringify(e.getAttribute("data-module"))+" because "+t.message,t})})["return"](a)})})}function r(e,t,a){var n=t.getPackage({name:"montage"}),o=t.getPackage({name:"mr"}),i=t.getPackage({name:"bluebird"}),r=[n.files["montage.js"].utf8,o.files["require.js"].utf8,o.files["browser.js"].utf8,i.files["js/browser/bluebird.min.js"].utf8];return e.getPackage({name:"montage"}).getModuleDescriptor("core/promise").bundled=!0,e.getPackage({name:"bluebird"}).getModuleDescriptor("bluebird").bundled=!0,u.collectBundle(e,t,a,r)}var u=e("../bundle"),c=e("montage"),l=e("url2"),d=e("bluebird");a.exports=n}});