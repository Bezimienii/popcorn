montageDefine("8c68c9f","lib/mozilla-ast",{dependencies:[],factory:function(e,t,n){"use strict";!function(){function e(e){if("Literal"==e.type)return null!=e.raw?e.raw:e.value+""}function n(t){var n=t.loc,r=n&&n.start,a=t.range;return new AST_Token({file:n&&n.source,line:r&&r.line,col:r&&r.column,pos:a?a[0]:t.start,endline:r&&r.line,endcol:r&&r.column,endpos:a?a[0]:t.start,raw:e(t)})}function r(t){var n=t.loc,r=n&&n.end,a=t.range;return new AST_Token({file:n&&n.source,line:r&&r.line,col:r&&r.column,pos:a?a[1]:t.end,endline:r&&r.line,endcol:r&&r.column,endpos:a?a[1]:t.end,raw:e(t)})}function a(e,a,i){var c="function From_Moz_"+e+"(M){\n";c+="return new U2."+a.name+"({\nstart: my_start_token(M),\nend: my_end_token(M)";var S="function To_Moz_"+e+"(M){\n";S+="return {\ntype: "+JSON.stringify(e),i&&i.split(/\s*,\s*/).forEach(function(e){var t=/([a-z0-9$_]+)(=|@|>|%)([a-z0-9$_]+)/i.exec(e);if(!t)throw new Error("Can't understand property map: "+e);var n=t[1],r=t[2],a=t[3];switch(c+=",\n"+a+": ",S+=",\n"+n+": ",r){case"@":c+="M."+n+".map(from_moz)",S+="M."+a+".map(to_moz)";break;case">":c+="from_moz(M."+n+")",S+="to_moz(M."+a+")";break;case"=":c+="M."+n,S+="M."+a;break;case"%":c+="from_moz(M."+n+").body",S+="to_moz_block(M)";break;default:throw new Error("Can't understand operator in propmap: "+e)}}),c+="\n})\n}",S+="\n}\n}",c=new Function("U2","my_start_token","my_end_token","from_moz","return("+c+")")(t,n,r,o),S=new Function("to_moz","to_moz_block","return("+S+")")(s,u),p[e]=c,l(a,S)}function o(e){c.push(e);var t=null!=e?p[e.type](e):null;return c.pop(),t}function i(e,t,n){var r=e.start,a=e.end;return null!=r.pos&&null!=a.endpos&&(t.range=[r.pos,a.endpos]),r.line&&(t.loc={start:{line:r.line,column:r.col},end:a.endline?{line:a.endline,column:a.endcol}:null},r.file&&(t.loc.source=r.file)),t}function l(e,t){e.DEFMETHOD("to_mozilla_ast",function(){return i(this,t(this))})}function s(e){return null!=e?e.to_mozilla_ast():null}function u(e){return{type:"BlockStatement",body:e.body.map(s)}}var p={ExpressionStatement:function(e){var t=e.expression;return"Literal"===t.type&&"string"==typeof t.value?new AST_Directive({start:n(e),end:r(e),value:t.value}):new AST_SimpleStatement({start:n(e),end:r(e),body:o(t)})},TryStatement:function(e){var t=e.handlers||[e.handler];if(t.length>1||e.guardedHandlers&&e.guardedHandlers.length)throw new Error("Multiple catch clauses are not supported.");return new AST_Try({start:n(e),end:r(e),body:o(e.block).body,bcatch:o(t[0]),bfinally:e.finalizer?new AST_Finally(o(e.finalizer)):null})},Property:function(e){var t=e.key,a="Identifier"==t.type?t.name:t.value,i={start:n(t),end:r(e.value),key:a,value:o(e.value)};switch(e.kind){case"init":return new AST_ObjectKeyVal(i);case"set":return i.value.name=o(t),new AST_ObjectSetter(i);case"get":return i.value.name=o(t),new AST_ObjectGetter(i)}},ObjectExpression:function(e){return new AST_Object({start:n(e),end:r(e),properties:e.properties.map(function(e){return e.type="Property",o(e)})})},SequenceExpression:function(e){return AST_Seq.from_array(e.expressions.map(o))},MemberExpression:function(e){return new(e.computed?AST_Sub:AST_Dot)({start:n(e),end:r(e),property:e.computed?o(e.property):e.property.name,expression:o(e.object)})},SwitchCase:function(e){return new(e.test?AST_Case:AST_Default)({start:n(e),end:r(e),expression:o(e.test),body:e.consequent.map(o)})},VariableDeclaration:function(e){return new("const"===e.kind?AST_Const:AST_Var)({start:n(e),end:r(e),definitions:e.declarations.map(o)})},Literal:function(e){var t=e.value,a={start:n(e),end:r(e)};if(null===t)return new AST_Null(a);switch(typeof t){case"string":return a.value=t,new AST_String(a);case"number":return a.value=t,new AST_Number(a);case"boolean":return new(t?AST_True:AST_False)(a);default:var o=e.regex;return o&&o.pattern?a.value=new RegExp(o.pattern,o.flags).toString():a.value=e.regex&&e.raw?e.raw:t,new AST_RegExp(a)}},Identifier:function(e){var t=c[c.length-2];return new("LabeledStatement"==t.type?AST_Label:"VariableDeclarator"==t.type&&t.id===e?"const"==t.kind?AST_SymbolConst:AST_SymbolVar:"FunctionExpression"==t.type?t.id===e?AST_SymbolLambda:AST_SymbolFunarg:"FunctionDeclaration"==t.type?t.id===e?AST_SymbolDefun:AST_SymbolFunarg:"CatchClause"==t.type?AST_SymbolCatch:"BreakStatement"==t.type||"ContinueStatement"==t.type?AST_LabelRef:AST_SymbolRef)({start:n(e),end:r(e),name:e.name})}};p.UpdateExpression=p.UnaryExpression=function(e){var t="prefix"in e?e.prefix:"UnaryExpression"==e.type;return new(t?AST_UnaryPrefix:AST_UnaryPostfix)({start:n(e),end:r(e),operator:e.operator,expression:o(e.argument)})},a("Program",AST_Toplevel,"body@body"),a("EmptyStatement",AST_EmptyStatement),a("BlockStatement",AST_BlockStatement,"body@body"),a("IfStatement",AST_If,"test>condition, consequent>body, alternate>alternative"),a("LabeledStatement",AST_LabeledStatement,"label>label, body>body"),a("BreakStatement",AST_Break,"label>label"),a("ContinueStatement",AST_Continue,"label>label"),a("WithStatement",AST_With,"object>expression, body>body"),a("SwitchStatement",AST_Switch,"discriminant>expression, cases@body"),a("ReturnStatement",AST_Return,"argument>value"),a("ThrowStatement",AST_Throw,"argument>value"),a("WhileStatement",AST_While,"test>condition, body>body"),a("DoWhileStatement",AST_Do,"test>condition, body>body"),a("ForStatement",AST_For,"init>init, test>condition, update>step, body>body"),a("ForInStatement",AST_ForIn,"left>init, right>object, body>body"),a("DebuggerStatement",AST_Debugger),a("FunctionDeclaration",AST_Defun,"id>name, params@argnames, body%body"),a("VariableDeclarator",AST_VarDef,"id>name, init>value"),a("CatchClause",AST_Catch,"param>argname, body%body"),a("ThisExpression",AST_This),a("ArrayExpression",AST_Array,"elements@elements"),a("FunctionExpression",AST_Function,"id>name, params@argnames, body%body"),a("BinaryExpression",AST_Binary,"operator=operator, left>left, right>right"),a("LogicalExpression",AST_Binary,"operator=operator, left>left, right>right"),a("AssignmentExpression",AST_Assign,"operator=operator, left>left, right>right"),a("ConditionalExpression",AST_Conditional,"test>condition, consequent>consequent, alternate>alternative"),a("NewExpression",AST_New,"callee>expression, arguments@args"),a("CallExpression",AST_Call,"callee>expression, arguments@args"),l(AST_Directive,function(e){return{type:"ExpressionStatement",expression:{type:"Literal",value:e.value}}}),l(AST_SimpleStatement,function(e){return{type:"ExpressionStatement",expression:s(e.body)}}),l(AST_SwitchBranch,function(e){return{type:"SwitchCase",test:s(e.expression),consequent:e.body.map(s)}}),l(AST_Try,function(e){return{type:"TryStatement",block:u(e),handler:s(e.bcatch),guardedHandlers:[],finalizer:s(e.bfinally)}}),l(AST_Catch,function(e){return{type:"CatchClause",param:s(e.argname),guard:null,body:u(e)}}),l(AST_Definitions,function(e){return{type:"VariableDeclaration",kind:e instanceof AST_Const?"const":"var",declarations:e.definitions.map(s)}}),l(AST_Seq,function(e){return{type:"SequenceExpression",expressions:e.to_array().map(s)}}),l(AST_PropAccess,function(e){var t=e instanceof AST_Sub;return{type:"MemberExpression",object:s(e.expression),computed:t,property:t?s(e.property):{type:"Identifier",name:e.property}}}),l(AST_Unary,function(e){return{type:"++"==e.operator||"--"==e.operator?"UpdateExpression":"UnaryExpression",operator:e.operator,prefix:e instanceof AST_UnaryPrefix,argument:s(e.expression)}}),l(AST_Binary,function(e){return{type:"&&"==e.operator||"||"==e.operator?"LogicalExpression":"BinaryExpression",left:s(e.left),operator:e.operator,right:s(e.right)}}),l(AST_Object,function(e){return{type:"ObjectExpression",properties:e.properties.map(s)}}),l(AST_ObjectProperty,function(e){var t,n=is_identifier(e.key)?{type:"Identifier",name:e.key}:{type:"Literal",value:e.key};return e instanceof AST_ObjectKeyVal?t="init":e instanceof AST_ObjectGetter?t="get":e instanceof AST_ObjectSetter&&(t="set"),{type:"Property",kind:t,key:n,value:s(e.value)}}),l(AST_Symbol,function(e){var t=e.definition();return{type:"Identifier",name:t?t.mangled_name||t.name:e.name}}),l(AST_RegExp,function(e){var t=e.value;return{type:"Literal",value:t,raw:t.toString(),regex:{pattern:t.source,flags:t.toString().match(/[gimuy]*$/)[0]}}}),l(AST_Constant,function(e){var t=e.value;return"number"==typeof t&&(t<0||0===t&&1/t<0)?{type:"UnaryExpression",operator:"-",prefix:!0,argument:{type:"Literal",value:-t,raw:e.start.raw}}:{type:"Literal",value:t,raw:e.start.raw}}),l(AST_Atom,function(e){return{type:"Identifier",name:String(e.value)}}),AST_Boolean.DEFMETHOD("to_mozilla_ast",AST_Constant.prototype.to_mozilla_ast),AST_Null.DEFMETHOD("to_mozilla_ast",AST_Constant.prototype.to_mozilla_ast),AST_Hole.DEFMETHOD("to_mozilla_ast",function(){return null}),AST_Block.DEFMETHOD("to_mozilla_ast",AST_BlockStatement.prototype.to_mozilla_ast),AST_Lambda.DEFMETHOD("to_mozilla_ast",AST_Function.prototype.to_mozilla_ast);var c=null;AST_Node.from_mozilla_ast=function(e){var t=c;c=[];var n=o(e);return c=t,n}}()}});