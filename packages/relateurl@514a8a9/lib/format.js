"use strict";function formatAuth(t,r){return!t.auth||r.removeAuth||!t.extra.relation.maximumHost&&r.output!==constants.ABSOLUTE?"":t.auth+"@"}function formatHash(t,r){return t.hash?t.hash:""}function formatHost(t,r){return t.host.full&&(t.extra.relation.maximumAuth||r.output===constants.ABSOLUTE)?t.host.full:""}function formatPath(t,r){var e="",o=t.path.absolute.string,u=t.path.relative.string,n=showResource(t,r);if(t.extra.relation.maximumHost||r.output===constants.ABSOLUTE||r.output===constants.ROOT_RELATIVE)e=o;else if(u.length<=o.length&&r.output===constants.SHORTEST||r.output===constants.PATH_RELATIVE){if(e=u,""===e){var a=showQuery(t,r)&&!!getQuery(t,r);t.extra.relation.maximumPath&&!n?e="./":!t.extra.relation.overridesQuery||n||a||(e="./")}}else e=o;return"/"!==e||n||!r.removeRootTrailingSlash||t.extra.relation.minimumPort&&r.output!==constants.ABSOLUTE||(e=""),e}function formatPort(t,r){return t.port&&!t.extra.portIsDefault&&t.extra.relation.maximumHost?":"+t.port:""}function formatQuery(t,r){return showQuery(t,r)?getQuery(t,r):""}function formatResource(t,r){return showResource(t,r)?t.resource:""}function formatScheme(t,r){var e="";return(t.extra.relation.maximumHost||r.output===constants.ABSOLUTE)&&(e+=t.extra.relation.minimumScheme&&r.schemeRelative&&r.output!==constants.ABSOLUTE?"//":t.scheme+"://"),e}function formatUrl(t,r){var e="";return e+=formatScheme(t,r),e+=formatAuth(t,r),e+=formatHost(t,r),e+=formatPort(t,r),e+=formatPath(t,r),e+=formatResource(t,r),e+=formatQuery(t,r),e+=formatHash(t,r)}function getQuery(t,r){var e=r.removeEmptyQueries&&t.extra.relation.minimumPort;return t.query.string[e?"stripped":"full"]}function showQuery(t,r){return!t.extra.relation.minimumQuery||r.output===constants.ABSOLUTE||r.output===constants.ROOT_RELATIVE}function showResource(t,r){var e=r.removeDirectoryIndexes&&t.extra.resourceIsIndex,o=t.extra.relation.minimumResource&&r.output!==constants.ABSOLUTE&&r.output!==constants.ROOT_RELATIVE;return!!t.resource&&!o&&!e}var constants=require("./constants");module.exports=formatUrl;