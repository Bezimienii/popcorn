montageDefine("f6f73cf","src/cli",{dependencies:["lodash","fs","cli","path","shelljs","minimatch","htmlparser2","exit","strip-json-comments","./jshint.js","./reporters/default"],factory:function(e,r,t){"use strict";function n(e,r){return r?e+" (DEPRECATED, use "+r+" instead)":e+" (DEPRECATED)"}function o(e){var r,t=x.dirname(x.resolve(e)),n=i(),o=c(".jshintrc",t);return o?o:n&&(r=x.normalize(x.join(n,".jshintrc")),j.test("-e",r))?r:null}function i(){for(var e="",r=global.process.env,t=[r.USERPROFILE,r.HOME,r.HOMEPATH,r.HOMEDRIVE+r.HOMEPATH];t.length;)if(e=t.shift(),m.existsSync(e))return e}function s(r){var t=x.dirname(x.resolve(r)),n=c("package.json",t);if(!n)return null;try{return e(n).jshintConfig}catch(o){return null}}function a(r){try{return e(r).reporter}catch(t){return null}}function c(e,r){r=r||process.cwd();var t=x.normalize(x.join(r,e));if(void 0!==q[t])return q[t];var n=x.resolve(r,"../");return j.test("-e",t)?(q[t]=t,t):r===n?(q[t]=null,null):c(e,n)}function l(e){var r=c(e.excludePath||".jshintignore",e.cwd)||"";if(!r&&!e.exclude)return[];var t=(r?j.cat(r):"").split("\n"),n=e.exclude||"";return t.unshift.apply(t,n.split(",")),t.filter(function(e){return!!e.trim()}).map(function(e){return"!"===e[0]?"!"+x.resolve(x.dirname(r),e.substr(1).trim()):x.join(x.dirname(r),e.trim())})}function u(e,r){return r.some(function(r){return!!b(x.resolve(e),r,{nocase:!0})||(x.resolve(e)===r||(!!(j.test("-d",e)&&r.match(/^[^\/\\]*[\/\\]?$/)&&e.match(new RegExp("^"+r+".*")))||void 0))})}function f(e,r){function t(r,t){"script"===r&&(t.type&&!/text\/javascript/.test(t.type.toLowerCase())||(s=!0,c.push.apply(c,e.slice(a,l.endIndex).match(/\r\n|\n|\r/g)),i=null))}function n(e){"script"===e&&s&&(s=!1,a=l.startIndex,i=null)}function o(e){if(s){var r=e.split(/\r\n|\n|\r/);i||r.some(function(e){if(e)return i=/^(\s*)/.exec(e)[1],!0}),i&&(r=r.map(function(e){return e.replace(i,"")}),e=r.join("\n")),c.push(e)}}if("always"!==r&&("auto"!==r||!/^\s*</.test(e)))return e;var i,s=!1,a=0,c=[],l=new y.Parser({onopentag:t,onclosetag:n,ontext:o});return l.parseComplete(e),c.join("")}function p(e,r){function t(r,t){if("script"===r&&(!t.type||/text\/javascript/.test(t.type.toLowerCase()))){s=!0;var n=e.slice(a,u.endIndex),o=(n.match(/\r\n|\n|\r/g)||[]).length;c+=o,i=null}}function n(e){"script"===e&&s&&(s=!1,a=u.startIndex,i=null)}function o(e){if(s){var r=e.split(/\r\n|\n|\r/);i||r.some(function(e){if(e)return i=/^(\s*)/.exec(e)[1],!0}),r.forEach(function(){c+=1,i?l[c]=i.length:l[c]=0})}}if("always"===r||"auto"===r&&/^\s*</.test(e)){var i,s=!1,a=0,c=0,l=[],u=new y.Parser({onopentag:t,onclosetag:n,ontext:o});return u.parseComplete(e),l}}function d(e,r,t,n){if(!t||!u(e,t))return j.test("-e",e)?j.test("-d",e)?void j.ls(e).forEach(function(o){var i=x.join(e,o);(j.test("-d",i)||o.match(n))&&d(i,r,t,n)}):void r.push(e):void v.error("Can't open "+e)}function h(e,r,t,n,o){var i,s,a=[];t=t||{},t=JSON.parse(JSON.stringify(t)),t.prereq&&(t.prereq.forEach(function(e){e=x.join(t.dirname,e),j.test("-e",e)&&a.push(j.cat(e))}),delete t.prereq),t.globals&&(i=t.globals,delete t.globals),t.overrides&&(o&&g.each(t.overrides,function(e,r){b(x.normalize(o),r,{nocase:!0,matchBase:!0})&&(e.globals&&(i=g.extend(i||{},e.globals),delete e.globals),g.extend(t,e))}),delete t.overrides),delete t.dirname,a.push(e),a=a.join("\n"),a=a.replace(/^\uFEFF/,""),w(a,t,i)||w.errors.forEach(function(e){e&&r.push({file:o||"stdin",error:e})}),s=w.data(),s&&(s.file=o||"stdin",n.push(s))}var g=e("lodash"),m=e("fs"),v=e("cli"),x=e("path"),j=e("shelljs"),b=e("minimatch"),y=e("htmlparser2"),E=e("exit"),C=e("strip-json-comments"),w=e("./jshint.js").JSHINT,k=e("./reporters/default").reporter,S={config:["c","Custom configuration file","string",!1],reporter:["reporter","Custom reporter (<PATH>|jslint|checkstyle|unix)","string",void 0],prereq:["prereq","Comma-separated list of prerequisites (paths). E.g. files which include definitions of global variables used throughout your project","string",null],exclude:["exclude","Exclude files matching the given filename pattern (same as .jshintignore)","string",null],"exclude-path":["exclude-path","Pass in a custom jshintignore file path","string",null],filename:["filename","Pass in a filename when using STDIN to emulate config lookup for that file name","string",null],verbose:["verbose","Show message codes"],"show-non-errors":["show-non-errors","Show additional data generated by jshint"],"extra-ext":["e","Comma-separated list of file extensions to use (default is .js)","string",""],extract:["extract","Extract inline scripts contained in HTML (auto|always|never, default to never)","string","never"],"jslint-reporter":["jslint-reporter",n("Use a jslint compatible reporter","--reporter=jslint")],"checkstyle-reporter":["checkstyle-reporter",n("Use a CheckStyle compatible XML reporter","--reporter=checkstyle")]},q={},r={extract:f,exit:E,getConfig:function(e){return s(e)||r.loadConfig(o(e))},loadConfig:function(e){if(!e)return{};j.test("-e",e)||(v.error("Can't find config file: "+e),r.exit(1));try{var t=JSON.parse(C(j.cat(e)));if(t.dirname=x.dirname(e),t["extends"]){var n=r.loadConfig(x.resolve(t.dirname,t["extends"]));t=g.merge({},n,t,function(e,r){if(g.isArray(e))return e.concat(r)}),delete t["extends"]}return t}catch(o){v.error("Can't parse config file: "+e+"\nError:"+o),r.exit(1)}},gather:function(e){var r=[],t=new RegExp("\\.(js"+(e.extensions?"|"+e.extensions.replace(/,/g,"|").replace(/[\. ]/g,""):"")+")$"),n=e.ignores?e.ignores.map(function(e){return x.resolve(e)}):l({cwd:e.cwd});return e.args.forEach(function(e){d(e,r,n,t)}),r},run:function(e,t){function n(r){e.prereq&&(r.prereq=(r.prereq||[]).concat(e.prereq.split(/\s*,\s*/)))}var o,i=r.gather(e),s=[],a=[];return e.filename&&(o=x.resolve(e.filename)),e.useStdin&&e.ignores.indexOf(o)===-1?(v.withStdin(function(i){var c=e.config;o&&!c&&(c=r.getConfig(o)),c=c||{},n(c),h(f(i,e.extract),s,c,a,o),(e.reporter||k)(s,a,{verbose:e.verbose}),t(0===s.length)}),null):(i.forEach(function(t){var o,i=e.config||r.getConfig(t),c=[];try{o=j.cat(t)}catch(l){v.error("Can't open "+t),r.exit(1)}if(n(i),h(f(o,e.extract),c,i,a,t),c.length){var u=p(o,e.extract);u&&u.length&&c.forEach(function(e){var r=e.error.line;r>=0&&r<u.length&&u[r]&&(e.error.character+=u[r])}),s=s.concat(c)}}),(e.reporter||k)(s,a,{verbose:e.verbose}),0===s.length)},getBufferSize:function(){return process.stdout.bufferSize},interpret:function(e){function t(e){null!=e&&r.exit(e?0:2)}v.setArgv(e),v.options={},v.enable("version","glob","help"),v.setApp(x.resolve(__dirname+"/../package.json"));var n,o=v.parse(S);switch(o.config&&(n=r.loadConfig(o.config)),!0){case"jslint"===o.reporter:case o["jslint-reporter"]:o.reporter="./reporters/jslint_xml.js";break;case"checkstyle"===o.reporter:case o["checkstyle-reporter"]:o.reporter="./reporters/checkstyle.js";break;case"unix"===o.reporter:o.reporter="./reporters/unix.js";break;case o["show-non-errors"]:o.reporter="./reporters/non_error.js";break;case void 0!==o.reporter:o.reporter=x.resolve(process.cwd(),o.reporter)}var i;o.reporter&&(i=a(o.reporter),null===i&&(v.error("Can't load reporter file: "+o.reporter),r.exit(1))),t(r.run({args:v.args,config:n,reporter:i,ignores:l({exclude:o.exclude,excludePath:o["exclude-path"]}),extensions:o["extra-ext"],verbose:o.verbose,extract:o.extract,filename:o.filename,prereq:o.prereq,useStdin:{"-":!0,"/dev/stdin":!0}[e[e.length-1]]},t))}};t.exports=r}});