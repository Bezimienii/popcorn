module.exports=function(n,e){var t={};t.nonOptionCount=function(t){var i=n.getDemanded();i._&&t._.length<i._.count&&(void 0!==i._.msg?e.fail(i._.msg):e.fail("Not enough non-option arguments: got "+t._.length+", need at least "+i._.count))},t.missingArgumentValue=function(t){var i=n.getOptions(),r=[!0,!1,""];if(i.requiresArg.length>0){var a=[];if(i.requiresArg.forEach(function(n){var e=t[n];(~r.indexOf(e)||Array.isArray(e)&&!e.length)&&a.push(n)}),1===a.length)e.fail("Missing argument value: "+a[0]);else if(a.length>1){var o="Missing argument values: "+a.join(", ");e.fail(o)}}},t.requiredArguments=function(t){var i=n.getDemanded(),r=null;if(Object.keys(i).forEach(function(n){t.hasOwnProperty(n)||(r=r||{},r[n]=i[n])}),r){var a=[];Object.keys(r).forEach(function(n){var e=r[n].msg;e&&a.indexOf(e)<0&&a.push(e)});var o=a.length?"\n"+a.join("\n"):"";e.fail("Missing required arguments: "+Object.keys(r).join(", ")+o)}},t.unknownArguments=function(t,i){var r=e.getDescriptions(),a=n.getDemanded(),o=[],u={};Object.keys(i).forEach(function(n){i[n].forEach(function(e){u[e]=n})}),Object.keys(t).forEach(function(n){"$0"===n||"_"===n||r.hasOwnProperty(n)||a.hasOwnProperty(n)||u.hasOwnProperty(n)||o.push(n)}),1===o.length?e.fail("Unknown argument: "+o[0]):o.length>1&&e.fail("Unknown arguments: "+o.join(", "))};var i=[];t.check=function(n){i.push(n)},t.customChecks=function(n,t){i.forEach(function(i){try{var r=i(n,t);r?"string"==typeof r&&e.fail(r):e.fail("Argument check failed: "+i.toString())}catch(a){e.fail(a.message?a.message:a)}})};var r={};return t.implies=function(n,e){"object"==typeof n?Object.keys(n).forEach(function(e){t.implies(e,n[e])}):r[n]=e},t.getImplied=function(){return r},t.implications=function(n){var t=[];if(Object.keys(r).forEach(function(e){var i,a=e,o=r[e];i=Number(e),e=isNaN(i)?e:i,"number"==typeof e?e=n._.length>=e:e.match(/^--no-.+/)?(e=e.match(/^--no-(.+)/)[1],e=!n[e]):e=n[e],i=Number(o),o=isNaN(i)?o:i,"number"==typeof o?o=n._.length>=o:o.match(/^--no-.+/)?(o=o.match(/^--no-(.+)/)[1],o=!n[o]):o=n[o],e&&!o&&t.push(a)}),t.length){var i="Implications failed:\n";t.forEach(function(n){i+="  "+n+" -> "+r[n]}),e.fail(i)}},t};