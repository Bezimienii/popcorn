function hasKey(t,e){var s=t;e.slice(0,-1).forEach(function(t){s=s[t]||{}});var r=e[e.length-1];return r in s}function setKey(t,e,s){var r=t;e.slice(0,-1).forEach(function(t){void 0===r[t]&&(r[t]={}),r=r[t]});var n=e[e.length-1];void 0===r[n]||"boolean"==typeof r[n]?r[n]=s:Array.isArray(r[n])?r[n].push(s):r[n]=[r[n],s]}function isNumber(t){return"number"==typeof t||(!!/^0x[0-9a-f]+$/i.test(t)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t))}module.exports=function(t,e){function s(t,e){var s=!r.strings[t]&&isNumber(e)?Number(e):e;setKey(i,t.split("."),s),(n[t]||[]).forEach(function(t){setKey(i,t.split("."),s)})}e||(e={});var r={bools:{},strings:{}};[].concat(e["boolean"]).filter(Boolean).forEach(function(t){r.bools[t]=!0});var n={};Object.keys(e.alias||{}).forEach(function(t){n[t]=[].concat(e.alias[t]),n[t].forEach(function(e){n[e]=[t].concat(n[t].filter(function(t){return e!==t}))})}),[].concat(e.string).filter(Boolean).forEach(function(t){r.strings[t]=!0,n[t]&&(r.strings[n[t]]=!0)});var o=e["default"]||{},i={_:[]};Object.keys(r.bools).forEach(function(t){s(t,void 0!==o[t]&&o[t])});var a=[];t.indexOf("--")!==-1&&(a=t.slice(t.indexOf("--")+1),t=t.slice(0,t.indexOf("--")));for(var c=0;c<t.length;c++){var f=t[c];if(/^--.+=/.test(f)){var l=f.match(/^--([^=]+)=([\s\S]*)$/);s(l[1],l[2])}else if(/^--no-.+/.test(f)){var u=f.match(/^--no-(.+)/)[1];s(u,!1)}else if(/^--.+/.test(f)){var u=f.match(/^--(.+)/)[1],h=t[c+1];void 0===h||/^-/.test(h)||r.bools[u]||n[u]&&r.bools[n[u]]?/^(true|false)$/.test(h)?(s(u,"true"===h),c++):s(u,!r.strings[u]||""):(s(u,h),c++)}else if(/^-[^-]+/.test(f)){for(var v=f.slice(1,-1).split(""),b=!1,d=0;d<v.length;d++){var h=f.slice(d+2);if("-"!==h){if(/[A-Za-z]/.test(v[d])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(h)){s(v[d],h),b=!0;break}if(v[d+1]&&v[d+1].match(/\W/)){s(v[d],f.slice(d+2)),b=!0;break}s(v[d],!r.strings[v[d]]||"")}else s(v[d],h)}var u=f.slice(-1)[0];b||"-"===u||(!t[c+1]||/^(-|--)[^-]/.test(t[c+1])||r.bools[u]||n[u]&&r.bools[n[u]]?t[c+1]&&/true|false/.test(t[c+1])?(s(u,"true"===t[c+1]),c++):s(u,!r.strings[u]||""):(s(u,t[c+1]),c++))}else i._.push(r.strings._||!isNumber(f)?f:Number(f))}return Object.keys(o).forEach(function(t){hasKey(i,t.split("."))||(setKey(i,t.split("."),o[t]),(n[t]||[]).forEach(function(e){setKey(i,e.split("."),o[t])}))}),a.forEach(function(t){i._.push(t)}),i};