montageDefine("da2f0df","core/jsonp-transport",{dependencies:["montage/core/core","query-params","url","montage/core/uuid","montage/core/promise"],factory:function(e,r,o){var n=e("montage/core/core").Montage,a=e("query-params"),c=e("url"),t=e("montage/core/uuid"),s=e("montage/core/promise").Promise;r.JsonpTransport=n.specialize({constructor:{value:function(){}},makeRequest:{value:function(e,r,o){var n,d=s.defer(),u=this,i=c.parse(e),l=a.decode(i.query),p=r?r+"ServiceCallback":"serviceCallback",m=p+t.generate().replace(/-/g,"_"),f=document.createElement("script");return window[m]=function(e){u._handleResponse(e,d),document.head.removeChild(f),delete window[m]},l[o?o:"callback"]=m,n=e.replace(i.query,"")+a.encode(l),f.src=n,document.head.appendChild(f),d.promise}},_handleResponse:{value:function(e,r){e?e.error?r.reject(new Error(e.error)):r.resolve(e):r.reject(new Error("Unknown API Error"))}}}),r.shared=new r.JsonpTransport}});